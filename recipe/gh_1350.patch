From 632fc75d7758a831f3b529c6e9fa4cf1e7dd5433 Mon Sep 17 00:00:00 2001
From: Ian Henriksen <insertinterestingnamehere@gmail.com>
Date: Mon, 6 Nov 2017 14:39:12 -0600
Subject: [PATCH 1/6] Allow using compilers other than gfortran in conjunction
 with MSVC or clang-cl.

---
 cmake/f_check.cmake | 6 ------
 1 file changed, 6 deletions(-)

diff --git a/cmake/f_check.cmake b/cmake/f_check.cmake
index 4848553d9..f877fc3e1 100644
--- a/cmake/f_check.cmake
+++ b/cmake/f_check.cmake
@@ -20,12 +20,6 @@
 # NEEDBUNDERSCORE
 # NEED2UNDERSCORES
 
-if (MSVC)
-  # had to do this for MSVC, else CMake automatically assumes I have ifort... -hpa
-  include(CMakeForceCompiler)
-  CMAKE_FORCE_Fortran_COMPILER(gfortran GNU)
-endif ()
-
 if (NOT NO_LAPACK)
   enable_language(Fortran)
 else()

From 61587b0670b93b209a483f9d0823e2b7106bb783 Mon Sep 17 00:00:00 2001
From: Ian Henriksen <insertinterestingnamehere@gmail.com>
Date: Mon, 6 Nov 2017 14:41:02 -0600
Subject: [PATCH 2/6] Update lapack.cmake with additional routines from LAPACK
 version 3.7.0.

---
 cmake/lapack.cmake | 818 ++++++++++++++++++++++++++++++-----------------------
 1 file changed, 458 insertions(+), 360 deletions(-)

diff --git a/cmake/lapack.cmake b/cmake/lapack.cmake
index e6cd5373d..a4ac00eff 100644
--- a/cmake/lapack.cmake
+++ b/cmake/lapack.cmake
@@ -1,387 +1,485 @@
 # Sources for compiling lapack-netlib. Can't use CMakeLists.txt because lapack-netlib already has its own cmake files.
 
-set(ALLAUX
-  ilaenv.f ieeeck.f lsamen.f xerbla_array.f iparmq.f
-  ilaprec.f ilatrans.f ilauplo.f iladiag.f iparam2stage.F chla_transtype.f
-  ../INSTALL/ilaver.f ../INSTALL/slamch.f
-)
+set(ALLAUX ilaenv.f ieeeck.f lsamen.f iparmq.f iparam2stage.F
+   ilaprec.f ilatrans.f ilauplo.f iladiag.f chla_transtype.f
+   ../INSTALL/ilaver.f xerbla_array.f
+   ../INSTALL/slamch.f)
 
 set(SCLAUX
-  sbdsdc.f
-  sbdsqr.f sdisna.f slabad.f slacpy.f sladiv.f slae2.f  slaebz.f
-  slaed0.f slaed1.f slaed2.f slaed3.f slaed4.f slaed5.f slaed6.f
-  slaed7.f slaed8.f slaed9.f slaeda.f slaev2.f slagtf.f
-  slagts.f slamrg.f slanst.f
-  slapy2.f slapy3.f slarnv.f
-  slarra.f slarrb.f slarrc.f slarrd.f slarre.f slarrf.f slarrj.f
-  slarrk.f slarrr.f slaneg.f
-  slartg.f slaruv.f slas2.f  slascl.f
-  slasd0.f slasd1.f slasd2.f slasd3.f slasd4.f slasd5.f slasd6.f
-  slasd7.f slasd8.f slasda.f slasdq.f slasdt.f
-  slaset.f slasq1.f slasq2.f slasq3.f slasq4.f slasq5.f slasq6.f
-  slasr.f  slasrt.f slassq.f slasv2.f spttrf.f sstebz.f sstedc.f
-  ssteqr.f ssterf.f slaisnan.f sisnan.f
-  slartgp.f slartgs.f
-  ../INSTALL/second_${TIMER}.f
-)
+   sbdsdc.f
+   sbdsqr.f sdisna.f slabad.f slacpy.f sladiv.f slae2.f  slaebz.f
+   slaed0.f slaed1.f slaed2.f slaed3.f slaed4.f slaed5.f slaed6.f
+   slaed7.f slaed8.f slaed9.f slaeda.f slaev2.f slagtf.f
+   slagts.f slamrg.f slanst.f
+   slapy2.f slapy3.f slarnv.f
+   slarra.f slarrb.f slarrc.f slarrd.f slarre.f slarrf.f slarrj.f
+   slarrk.f slarrr.f slaneg.f
+   slartg.f slaruv.f slas2.f  slascl.f
+   slasd0.f slasd1.f slasd2.f slasd3.f slasd4.f slasd5.f slasd6.f
+   slasd7.f slasd8.f slasda.f slasdq.f slasdt.f
+   slaset.f slasq1.f slasq2.f slasq3.f slasq4.f slasq5.f slasq6.f
+   slasr.f  slasrt.f slassq.f slasv2.f spttrf.f sstebz.f sstedc.f
+   ssteqr.f ssterf.f slaisnan.f sisnan.f
+   slartgp.f slartgs.f
+   ../INSTALL/second_${TIMER}.f)
 
 set(DZLAUX
-  dbdsdc.f dbdsvdx.f 
-  dbdsqr.f ddisna.f dlabad.f dlacpy.f dladiv.f dlae2.f  dlaebz.f
-  dlaed0.f dlaed1.f dlaed2.f dlaed3.f dlaed4.f dlaed5.f dlaed6.f
-  dlaed7.f dlaed8.f dlaed9.f dlaeda.f dlaev2.f dlagtf.f
-  dlagts.f dlamrg.f dlanst.f
-  dlapy2.f dlapy3.f dlarnv.f
-  dlarra.f dlarrb.f dlarrc.f dlarrd.f dlarre.f dlarrf.f dlarrj.f
-  dlarrk.f dlarrr.f dlaneg.f
-  dlartg.f dlaruv.f dlas2.f  dlascl.f
-  dlasd0.f dlasd1.f dlasd2.f dlasd3.f dlasd4.f dlasd5.f dlasd6.f
-  dlasd7.f dlasd8.f dlasda.f dlasdq.f dlasdt.f
-  dlaset.f dlasq1.f dlasq2.f dlasq3.f dlasq4.f dlasq5.f dlasq6.f
-  dlasr.f  dlasrt.f dlassq.f dlasv2.f dpttrf.f dstebz.f dstedc.f
-  dsteqr.f dsterf.f dlaisnan.f disnan.f
-  dlartgp.f dlartgs.f
-  ../INSTALL/dlamch.f ../INSTALL/dsecnd_${TIMER}.f
-  dgelq.f dgelqt.f dgelqt3.f dgemlq.f dgemlqt.f dgemqr.f dgeqr.f   
-  dgetsls.f dlamswlq.f dlamtsqr.f dlaswlq.f dlatsqr.f dtplqt.f  
-  dtplqt2.f dtpmlqt.f dsysv_aa.f dsytrf_aa.f dsytrs_aa.f dlasyf_aa.f  
-  dsytf2_rk.f dlasyf_rk.f dsytrf_rk.f dsytrs_3.f dsycon_3.f dsytri_3.f   
-  dsytri_3x.f dsysv_rk.f dsb2st_kernels.f dsbev_2stage.f dsbevd_2stage.f  
-  dsbevx_2stage.f dsyev_2stage.f dsyevd_2stage.f dsyevr_2stage.f  
-  dsyevx_2stage.f dsygv_2stage.f dsytrd_2stage.f dsytrd_sb2st.F 
-  dsytrd_sy2sb.f dlarfy.f         
-)
+   dbdsdc.f
+   dbdsqr.f ddisna.f dlabad.f dlacpy.f dladiv.f dlae2.f  dlaebz.f
+   dlaed0.f dlaed1.f dlaed2.f dlaed3.f dlaed4.f dlaed5.f dlaed6.f
+   dlaed7.f dlaed8.f dlaed9.f dlaeda.f dlaev2.f dlagtf.f
+   dlagts.f dlamrg.f dlanst.f
+   dlapy2.f dlapy3.f dlarnv.f
+   dlarra.f dlarrb.f dlarrc.f dlarrd.f dlarre.f dlarrf.f dlarrj.f
+   dlarrk.f dlarrr.f dlaneg.f
+   dlartg.f dlaruv.f dlas2.f  dlascl.f
+   dlasd0.f dlasd1.f dlasd2.f dlasd3.f dlasd4.f dlasd5.f dlasd6.f
+   dlasd7.f dlasd8.f dlasda.f dlasdq.f dlasdt.f
+   dlaset.f dlasq1.f dlasq2.f dlasq3.f dlasq4.f dlasq5.f dlasq6.f
+   dlasr.f  dlasrt.f dlassq.f dlasv2.f dpttrf.f dstebz.f dstedc.f
+   dsteqr.f dsterf.f dlaisnan.f disnan.f
+   dlartgp.f dlartgs.f
+   ../INSTALL/dlamch.f ../INSTALL/dsecnd_${TIMER}.f)
 
 set(SLASRC
-  sbdsvdx.f sgbbrd.f sgbcon.f sgbequ.f sgbrfs.f sgbsv.f
-  sgbsvx.f sgbtf2.f sgbtrf.f sgbtrs.f sgebak.f sgebal.f sgebd2.f
-  sgebrd.f sgecon.f sgeequ.f sgees.f  sgeesx.f sgeev.f  sgeevx.f
-  DEPRECATED/sgegs.f  DEPRECATED/sgegv.f  sgehd2.f sgehrd.f sgelq2.f sgelqf.f
-  sgels.f  sgelsd.f sgelss.f DEPRECATED/sgelsx.f sgelsy.f sgeql2.f sgeqlf.f
-  sgeqp3.f DEPRECATED/sgeqpf.f sgeqr2.f sgeqr2p.f sgeqrf.f sgeqrfp.f sgerfs.f
-  sgerq2.f sgerqf.f sgesc2.f sgesdd.f  sgesvd.f sgesvdx.f sgesvx.f
-  sgetc2.f sgetri.f sgetrf2.f
-  sggbak.f sggbal.f sgghd3.f  sgges.f  sgges3.f sggesx.f sggev.f sggev3.f  sggevx.f
-  sggglm.f sgghrd.f sgglse.f sggqrf.f
-  sggrqf.f DEPRECATED/sggsvd.f sggsvd3.f DEPRECATED/sggsvp.f sggsvp3.f sgtcon.f sgtrfs.f sgtsv.f
-  sgtsvx.f sgttrf.f sgttrs.f sgtts2.f shgeqz.f
-  shsein.f shseqr.f slabrd.f slacon.f slacn2.f
-  slaein.f slaexc.f slag2.f  slags2.f slagtm.f slagv2.f slahqr.f
-  DEPRECATED/slahrd.f slahr2.f slaic1.f slaln2.f slals0.f slalsa.f slalsd.f
-  slangb.f slange.f slangt.f slanhs.f slansb.f slansp.f
-  slansy.f slantb.f slantp.f slantr.f slanv2.f
-  slapll.f slapmt.f
-  slaqgb.f slaqge.f slaqp2.f slaqps.f slaqsb.f slaqsp.f slaqsy.f
-  slaqr0.f slaqr1.f slaqr2.f slaqr3.f slaqr4.f slaqr5.f
-  slaqtr.f slar1v.f slar2v.f ilaslr.f ilaslc.f
-  slarf.f  slarfb.f slarfg.f slarfgp.f slarft.f slarfx.f slargv.f
-  slarrv.f slartv.f
-  slarz.f  slarzb.f slarzt.f slasy2.f slasyf.f slasyf_rook.f
-  slatbs.f slatdf.f slatps.f slatrd.f slatrs.f slatrz.f DEPRECATED/slatzm.f
-  sopgtr.f sopmtr.f sorg2l.f sorg2r.f
-  sorgbr.f sorghr.f sorgl2.f sorglq.f sorgql.f sorgqr.f sorgr2.f
-  sorgrq.f sorgtr.f sorm2l.f sorm2r.f sorm22.f
-  sormbr.f sormhr.f sorml2.f sormlq.f sormql.f sormqr.f sormr2.f
-  sormr3.f sormrq.f sormrz.f sormtr.f spbcon.f spbequ.f spbrfs.f
-  spbstf.f spbsv.f  spbsvx.f
-  spbtf2.f spbtrf.f spbtrs.f spocon.f spoequ.f sporfs.f sposv.f
-  sposvx.f spstrf.f spstf2.f
-  sppcon.f sppequ.f
-  spprfs.f sppsv.f  sppsvx.f spptrf.f spptri.f spptrs.f sptcon.f
-  spteqr.f sptrfs.f sptsv.f  sptsvx.f spttrs.f sptts2.f srscl.f
-  ssbev.f  ssbevd.f ssbevx.f ssbgst.f ssbgv.f  ssbgvd.f ssbgvx.f
-  ssbtrd.f sspcon.f sspev.f  sspevd.f sspevx.f sspgst.f
-  sspgv.f  sspgvd.f sspgvx.f ssprfs.f sspsv.f  sspsvx.f ssptrd.f
-  ssptrf.f ssptri.f ssptrs.f sstegr.f sstein.f sstev.f  sstevd.f sstevr.f
-  sstevx.f
-  ssycon.f ssyev.f  ssyevd.f ssyevr.f ssyevx.f ssygs2.f
-  ssygst.f ssygv.f  ssygvd.f ssygvx.f ssyrfs.f ssysv.f  ssysvx.f
-  ssytd2.f ssytf2.f ssytrd.f ssytrf.f ssytri.f ssytri2.f ssytri2x.f
-  ssyswapr.f ssytrs.f ssytrs2.f ssyconv.f
-  ssytf2_rook.f ssytrf_rook.f ssytrs_rook.f
-  ssytri_rook.f ssycon_rook.f ssysv_rook.f
-  stbcon.f
-  stbrfs.f stbtrs.f stgevc.f stgex2.f stgexc.f stgsen.f
-  stgsja.f stgsna.f stgsy2.f stgsyl.f stpcon.f stprfs.f stptri.f
-  stptrs.f
-  strcon.f strevc.f strevc3.f strexc.f strrfs.f strsen.f strsna.f strsyl.f
-  strtrs.f DEPRECATED/stzrqf.f stzrzf.f sstemr.f
-  slansf.f spftrf.f spftri.f spftrs.f ssfrk.f stfsm.f stftri.f stfttp.f
-  stfttr.f stpttf.f stpttr.f strttf.f strttp.f
-  sgejsv.f  sgesvj.f  sgsvj0.f  sgsvj1.f
-  sgeequb.f ssyequb.f spoequb.f sgbequb.f
-  sbbcsd.f slapmr.f sorbdb.f sorbdb1.f sorbdb2.f sorbdb3.f sorbdb4.f
-  sorbdb5.f sorbdb6.f sorcsd.f sorcsd2by1.f
-  sgeqrt.f sgeqrt2.f sgeqrt3.f sgemqrt.f
-  stpqrt.f stpqrt2.f stpmqrt.f stprfb.f spotri.f
-  sgelq.f  sgelqt.f sgelqt3.f sgemlq.f sgemlqt.f sgemqr.f sgeqr.f sgetsls.f    
-  slamswlq.f slamtsqr.f slaswlq.f slatsqr.f stplqt.f stplqt2.f stpmlqt.f    
-  ssysv_aa.f ssytrf_aa.f ssytrs_aa.f slasyf_aa.f ssytf2_rk.f slasyf_rk.f       
-  ssytrf_rk.f ssytrs_3.f ssycon_3.f ssytri_3.f ssytri_3x.f ssysv_rk.f        
-  ssb2st_kernels.f ssbev_2stage.f ssbevd_2stage.f ssbevx_2stage.f  
-  ssyev_2stage.f ssyevd_2stage.f ssyevr_2stage.f ssyevx_2stage.f 
-  ssygv_2stage.f ssytrd_2stage.f ssytrd_sb2st.F ssytrd_sy2sb.f slarfy.f         
-)
+   sbdsvdx.f sgbbrd.f sgbcon.f sgbequ.f sgbrfs.f sgbsv.f
+   sgbsvx.f sgbtf2.f sgbtrf.f sgbtrs.f sgebak.f sgebal.f sgebd2.f
+   sgebrd.f sgecon.f sgeequ.f sgees.f  sgeesx.f sgeev.f  sgeevx.f
+   sgehd2.f sgehrd.f sgelq2.f sgelqf.f
+   sgels.f  sgelsd.f sgelss.f sgelsy.f sgeql2.f sgeqlf.f
+   sgeqp3.f sgeqr2.f sgeqr2p.f sgeqrf.f sgeqrfp.f sgerfs.f sgerq2.f sgerqf.f
+   sgesc2.f sgesdd.f sgesvd.f sgesvdx.f sgesvx.f sgetc2.f
+   sgetrf2.f sgetri.f
+   sggbak.f sggbal.f
+   sgges.f  sgges3.f sggesx.f sggev.f  sggev3.f sggevx.f
+   sggglm.f sgghrd.f sgghd3.f sgglse.f sggqrf.f
+   sggrqf.f sggsvd3.f sggsvp3.f sgtcon.f sgtrfs.f sgtsv.f
+   sgtsvx.f sgttrf.f sgttrs.f sgtts2.f shgeqz.f
+   shsein.f shseqr.f slabrd.f slacon.f slacn2.f
+   slaein.f slaexc.f slag2.f  slags2.f slagtm.f slagv2.f slahqr.f
+   slahr2.f slaic1.f slaln2.f slals0.f slalsa.f slalsd.f
+   slangb.f slange.f slangt.f slanhs.f slansb.f slansp.f
+   slansy.f slantb.f slantp.f slantr.f slanv2.f
+   slapll.f slapmt.f
+   slaqgb.f slaqge.f slaqp2.f slaqps.f slaqsb.f slaqsp.f slaqsy.f
+   slaqr0.f slaqr1.f slaqr2.f slaqr3.f slaqr4.f slaqr5.f
+   slaqtr.f slar1v.f slar2v.f ilaslr.f ilaslc.f
+   slarf.f  slarfb.f slarfg.f slarfgp.f slarft.f slarfx.f slarfy.f slargv.f
+   slarrv.f slartv.f
+   slarz.f  slarzb.f slarzt.f slasy2.f
+   slasyf.f slasyf_rook.f slasyf_rk.f slasyf_aa.f
+   slatbs.f slatdf.f slatps.f slatrd.f slatrs.f slatrz.f
+   sopgtr.f sopmtr.f sorg2l.f sorg2r.f
+   sorgbr.f sorghr.f sorgl2.f sorglq.f sorgql.f sorgqr.f sorgr2.f
+   sorgrq.f sorgtr.f sorm2l.f sorm2r.f sorm22.f
+   sormbr.f sormhr.f sorml2.f sormlq.f sormql.f sormqr.f sormr2.f
+   sormr3.f sormrq.f sormrz.f sormtr.f spbcon.f spbequ.f spbrfs.f
+   spbstf.f spbsv.f  spbsvx.f
+   spbtf2.f spbtrf.f spbtrs.f spocon.f spoequ.f sporfs.f sposv.f
+   sposvx.f spotrf2.f spotri.f spstrf.f spstf2.f
+   sppcon.f sppequ.f
+   spprfs.f sppsv.f  sppsvx.f spptrf.f spptri.f spptrs.f sptcon.f
+   spteqr.f sptrfs.f sptsv.f  sptsvx.f spttrs.f sptts2.f srscl.f
+   ssbev.f  ssbevd.f ssbevx.f ssbgst.f ssbgv.f  ssbgvd.f ssbgvx.f
+   ssbtrd.f sspcon.f sspev.f  sspevd.f sspevx.f sspgst.f
+   sspgv.f  sspgvd.f sspgvx.f ssprfs.f sspsv.f  sspsvx.f ssptrd.f
+   ssptrf.f ssptri.f ssptrs.f sstegr.f sstein.f sstev.f  sstevd.f sstevr.f
+   sstevx.f ssycon.f ssyev.f  ssyevd.f ssyevr.f ssyevx.f ssygs2.f
+   ssygst.f ssygv.f  ssygvd.f ssygvx.f ssyrfs.f ssysv.f  ssysvx.f
+   ssytd2.f ssytf2.f ssytrd.f ssytrf.f ssytri.f ssytri2.f ssytri2x.f
+   ssyswapr.f ssytrs.f ssytrs2.f
+   ssyconv.f ssyconvf.f ssyconvf_rook.f
+   ssysv_aa.f ssytrf_aa.f ssytrs_aa.f
+   ssytf2_rook.f ssytrf_rook.f ssytrs_rook.f
+   ssytri_rook.f ssycon_rook.f ssysv_rook.f
+   ssytf2_rk.f ssytrf_rk.f ssytrs_3.f
+   ssytri_3.f ssytri_3x.f ssycon_3.f ssysv_rk.f
+   ssysv_aa.f ssytrf_aa.f ssytrs_aa.f
+   stbcon.f
+   stbrfs.f stbtrs.f stgevc.f stgex2.f stgexc.f stgsen.f
+   stgsja.f stgsna.f stgsy2.f stgsyl.f stpcon.f stprfs.f stptri.f
+   stptrs.f
+   strcon.f strevc.f strevc3.f strexc.f strrfs.f strsen.f strsna.f strsyl.f
+   strtrs.f stzrzf.f sstemr.f
+   slansf.f spftrf.f spftri.f spftrs.f ssfrk.f stfsm.f stftri.f stfttp.f
+   stfttr.f stpttf.f stpttr.f strttf.f strttp.f
+   sgejsv.f sgesvj.f sgsvj0.f sgsvj1.f
+   sgeequb.f ssyequb.f spoequb.f sgbequb.f
+   sbbcsd.f slapmr.f sorbdb.f sorbdb1.f sorbdb2.f sorbdb3.f sorbdb4.f
+   sorbdb5.f sorbdb6.f sorcsd.f sorcsd2by1.f
+   sgeqrt.f sgeqrt2.f sgeqrt3.f sgemqrt.f
+   stpqrt.f stpqrt2.f stpmqrt.f stprfb.f
+   sgelqt.f sgelqt3.f sgemlqt.f
+   sgetsls.f sgeqr.f slatsqr.f slamtsqr.f sgemqr.f
+   sgelq.f slaswlq.f slamswlq.f sgemlq.f
+   stplqt.f stplqt2.f stpmlqt.f
+   ssytrd_2stage.f ssytrd_sy2sb.f ssytrd_sb2st.F ssb2st_kernels.f
+   ssyevd_2stage.f ssyev_2stage.f ssyevx_2stage.f ssyevr_2stage.f
+   ssbev_2stage.f ssbevx_2stage.f ssbevd_2stage.f ssygv_2stage.f)
 
-set(DSLASRC spotrs.f spotrf2.f)
+set(SXLASRC sgesvxx.f sgerfsx.f sla_gerfsx_extended.f sla_geamv.f
+   sla_gercond.f sla_gerpvgrw.f ssysvxx.f ssyrfsx.f
+   sla_syrfsx_extended.f sla_syamv.f sla_syrcond.f sla_syrpvgrw.f
+   sposvxx.f sporfsx.f sla_porfsx_extended.f sla_porcond.f
+   sla_porpvgrw.f sgbsvxx.f sgbrfsx.f sla_gbrfsx_extended.f
+   sla_gbamv.f sla_gbrcond.f sla_gbrpvgrw.f sla_lin_berr.f slarscl2.f
+   slascl2.f sla_wwaddw.f)
 
 set(CLASRC
-  cbdsqr.f cgbbrd.f cgbcon.f cgbequ.f cgbrfs.f cgbsv.f  cgbsvx.f
-  cgbtf2.f cgbtrf.f cgbtrs.f cgebak.f cgebal.f cgebd2.f cgebrd.f
-  cgecon.f cgeequ.f cgees.f  cgeesx.f cgeev.f  cgeevx.f
-  DEPRECATED/cgegs.f  DEPRECATED/cgegv.f  cgehd2.f cgehrd.f cgelq2.f cgelqf.f
-  cgels.f  cgelsd.f cgelss.f DEPRECATED/cgelsx.f cgelsy.f cgeql2.f cgeqlf.f cgeqp3.f
-  DEPRECATED/cgeqpf.f cgeqr2.f cgeqr2p.f cgeqrf.f cgeqrfp.f cgerfs.f
-  cgerq2.f cgerqf.f cgesc2.f cgesdd.f  cgesvd.f
-  cgesvx.f cgetc2.f cgetri.f
-  cggbak.f cggbal.f cgges.f  cggesx.f cggev.f  cggevx.f cggglm.f
-  cgghrd.f cgglse.f cggqrf.f cggrqf.f
-  DEPRECATED/cggsvd.f DEPRECATED/cggsvp.f
-  cgtcon.f cgtrfs.f cgtsv.f  cgtsvx.f cgttrf.f cgttrs.f cgtts2.f chbev.f
-  chbevd.f chbevx.f chbgst.f chbgv.f  chbgvd.f chbgvx.f chbtrd.f
-  checon.f cheev.f  cheevd.f cheevr.f cheevx.f chegs2.f chegst.f
-  chegv.f  chegvd.f chegvx.f cherfs.f chesv.f  chesvx.f chetd2.f
-  chetf2.f chetrd.f
-  chetrf.f chetri.f chetri2.f chetri2x.f cheswapr.f
-  chetrs.f chetrs2.f
-  chetf2_rook.f chetrf_rook.f chetri_rook.f chetrs_rook.f checon_rook.f chesv_rook.f
-  chgeqz.f chpcon.f chpev.f  chpevd.f
-  chpevx.f chpgst.f chpgv.f  chpgvd.f chpgvx.f chprfs.f chpsv.f
-  chpsvx.f
-  chptrd.f chptrf.f chptri.f chptrs.f chsein.f chseqr.f clabrd.f
-  clacgv.f clacon.f clacn2.f clacp2.f clacpy.f clacrm.f clacrt.f cladiv.f
-  claed0.f claed7.f claed8.f
-  claein.f claesy.f claev2.f clags2.f clagtm.f
-  clahef.f clahef_rook.f clahqr.f
-  DEPRECATED/clahrd.f clahr2.f claic1.f clals0.f clalsa.f clalsd.f clangb.f clange.f clangt.f
-  clanhb.f clanhe.f
-  clanhp.f clanhs.f clanht.f clansb.f clansp.f clansy.f clantb.f
-  clantp.f clantr.f clapll.f clapmt.f clarcm.f claqgb.f claqge.f
-  claqhb.f claqhe.f claqhp.f claqp2.f claqps.f claqsb.f
-  claqr0.f claqr1.f claqr2.f claqr3.f claqr4.f claqr5.f
-  claqsp.f claqsy.f clar1v.f clar2v.f ilaclr.f ilaclc.f
-  clarf.f  clarfb.f clarfg.f clarft.f clarfgp.f
-  clarfx.f clargv.f clarnv.f clarrv.f clartg.f clartv.f
-  clarz.f  clarzb.f clarzt.f clascl.f claset.f clasr.f  classq.f
-  clasyf.f clasyf_rook.f clatbs.f clatdf.f clatps.f clatrd.f clatrs.f clatrz.f
-  DEPRECATED/clatzm.f cpbcon.f cpbequ.f cpbrfs.f cpbstf.f cpbsv.f
-  cpbsvx.f cpbtf2.f cpbtrf.f cpbtrs.f cpocon.f cpoequ.f cporfs.f
-  cposv.f  cposvx.f cpstrf.f cpstf2.f
-  cppcon.f cppequ.f cpprfs.f cppsv.f  cppsvx.f cpptrf.f cpptri.f cpptrs.f
-  cptcon.f cpteqr.f cptrfs.f cptsv.f  cptsvx.f cpttrf.f cpttrs.f cptts2.f
-  crot.f   cspcon.f csprfs.f cspsv.f
-  cspsvx.f csptrf.f csptri.f csptrs.f csrscl.f cstedc.f
-  cstegr.f cstein.f csteqr.f
-  csycon.f
-  csyrfs.f csysv.f  csysvx.f csytf2.f csytrf.f csytri.f csytri2.f csytri2x.f
-  csyswapr.f csytrs.f csytrs2.f csyconv.f
-  csytf2_rook.f csytrf_rook.f csytrs_rook.f
-  csytri_rook.f csycon_rook.f csysv_rook.f
-  ctbcon.f ctbrfs.f ctbtrs.f ctgevc.f ctgex2.f
-  ctgexc.f ctgsen.f ctgsja.f ctgsna.f ctgsy2.f ctgsyl.f ctpcon.f
-  ctprfs.f ctptri.f
-  ctptrs.f ctrcon.f ctrevc.f ctrevc3.f ctrexc.f ctrrfs.f ctrsen.f ctrsna.f
-  ctrsyl.f ctrtrs.f DEPRECATED/ctzrqf.f ctzrzf.f cung2l.f cung2r.f
-  cungbr.f cunghr.f cungl2.f cunglq.f cungql.f cungqr.f cungr2.f
-  cungrq.f cungtr.f cunm2l.f cunm2r.f cunmbr.f cunmhr.f cunml2.f
-  cunmlq.f cunmql.f cunmqr.f cunmr2.f cunmr3.f cunmrq.f cunmrz.f
-  cunmtr.f cupgtr.f cupmtr.f icmax1.f scsum1.f cstemr.f
-  chfrk.f ctfttp.f clanhf.f cpftrf.f cpftri.f cpftrs.f ctfsm.f ctftri.f
-  ctfttr.f ctpttf.f ctpttr.f ctrttf.f ctrttp.f
-  cgeequb.f cgbequb.f csyequb.f cpoequb.f cheequb.f
-  cbbcsd.f clapmr.f cunbdb.f cunbdb1.f cunbdb2.f cunbdb3.f cunbdb4.f
-  cunbdb5.f cunbdb6.f cuncsd.f cuncsd2by1.f
-  cgeqrt.f cgeqrt2.f cgeqrt3.f cgemqrt.f
-  ctpqrt.f ctpqrt2.f ctpmqrt.f ctprfb.f cpotri.f
-  cgelq.f cgelqt.f cgelqt3.f cgemlq.f cgemlqt.f cgemqr.f cgeqr.f cgetsls.f
-  clamswlq.f clamtsqr.f claswlq.f clatsqr.f ctplqt.f ctplqt2.f ctpmlqt.f
-  chesv_aa.f chetrf_aa.f chetrs_aa.f clahef_aa.f csytf2_rk.f clasyf_rk.f
-  csytrf_rk.f csytrs_3.f csycon_3.f csytri_3.f csytri_3x.f csysv_rk.f
-  chetf2_rk.f clahef_rk.f chetrf_rk.f chetrs_3.f checon_3.f chetri_3.f
-  chetri_3x.f chesv_rk.f chb2st_kernels.f chbev_2stage.f chbevd_2stage.f
-  chbevx_2stage.f cheev_2stage.f cheevd_2stage.f cheevr_2stage.f cheevx_2stage.f
-  chegv_2stage.f chetrd_2stage.f chetrd_hb2st.F chetrd_he2hb.f clarfy.f
-)
+   cbdsqr.f cgbbrd.f cgbcon.f cgbequ.f cgbrfs.f cgbsv.f  cgbsvx.f
+   cgbtf2.f cgbtrf.f cgbtrs.f cgebak.f cgebal.f cgebd2.f cgebrd.f
+   cgecon.f cgeequ.f cgees.f  cgeesx.f cgeev.f  cgeevx.f
+   cgehd2.f cgehrd.f cgelq2.f cgelqf.f
+   cgels.f  cgelsd.f cgelss.f cgelsy.f cgeql2.f cgeqlf.f cgeqp3.f
+   cgeqr2.f cgeqr2p.f cgeqrf.f cgeqrfp.f cgerfs.f cgerq2.f cgerqf.f
+   cgesc2.f cgesdd.f cgesvd.f cgesvdx.f
+   cgesvj.f cgejsv.f cgsvj0.f cgsvj1.f
+   cgesvx.f cgetc2.f cgetrf2.f
+   cgetri.f
+   cggbak.f cggbal.f
+   cgges.f  cgges3.f cggesx.f cggev.f  cggev3.f cggevx.f
+   cggglm.f cgghrd.f cgghd3.f cgglse.f cggqrf.f cggrqf.f
+   cggsvd3.f cggsvp3.f
+   cgtcon.f cgtrfs.f cgtsv.f  cgtsvx.f cgttrf.f cgttrs.f cgtts2.f chbev.f
+   chbevd.f chbevx.f chbgst.f chbgv.f  chbgvd.f chbgvx.f chbtrd.f
+   checon.f cheev.f  cheevd.f cheevr.f cheevx.f chegs2.f chegst.f
+   chegv.f  chegvd.f chegvx.f cherfs.f chesv.f  chesvx.f chetd2.f
+   chetf2.f chetrd.f
+   chetrf.f chetri.f chetri2.f chetri2x.f cheswapr.f
+   chetrs.f chetrs2.f
+   chetf2_rook.f chetrf_rook.f chetri_rook.f
+   chetrs_rook.f checon_rook.f chesv_rook.f
+   chetf2_rk.f chetrf_rk.f chetri_3.f chetri_3x.f
+   chetrs_3.f checon_3.f chesv_rk.f
+   chesv_aa.f chetrf_aa.f chetrs_aa.f
+   chgeqz.f chpcon.f chpev.f  chpevd.f
+   chpevx.f chpgst.f chpgv.f  chpgvd.f chpgvx.f chprfs.f chpsv.f
+   chpsvx.f
+   chptrd.f chptrf.f chptri.f chptrs.f chsein.f chseqr.f clabrd.f
+   clacgv.f clacon.f clacn2.f clacp2.f clacpy.f clacrm.f clacrt.f cladiv.f
+   claed0.f claed7.f claed8.f
+   claein.f claesy.f claev2.f clags2.f clagtm.f
+   clahef.f clahef_rook.f clahef_rk.f clahef_aa.f clahqr.f
+   clahr2.f claic1.f clals0.f clalsa.f clalsd.f clangb.f clange.f clangt.f
+   clanhb.f clanhe.f
+   clanhp.f clanhs.f clanht.f clansb.f clansp.f clansy.f clantb.f
+   clantp.f clantr.f clapll.f clapmt.f clarcm.f claqgb.f claqge.f
+   claqhb.f claqhe.f claqhp.f claqp2.f claqps.f claqsb.f
+   claqr0.f claqr1.f claqr2.f claqr3.f claqr4.f claqr5.f
+   claqsp.f claqsy.f clar1v.f clar2v.f ilaclr.f ilaclc.f
+   clarf.f  clarfb.f clarfg.f clarfgp.f clarft.f
+   clarfx.f clarfy.f clargv.f clarnv.f clarrv.f clartg.f clartv.f
+   clarz.f  clarzb.f clarzt.f clascl.f claset.f clasr.f  classq.f
+   clasyf.f clasyf_rook.f clasyf_rk.f clasyf_aa.f
+   clatbs.f clatdf.f clatps.f clatrd.f clatrs.f clatrz.f
+   cpbcon.f cpbequ.f cpbrfs.f cpbstf.f cpbsv.f
+   cpbsvx.f cpbtf2.f cpbtrf.f cpbtrs.f cpocon.f cpoequ.f cporfs.f
+   cposv.f  cposvx.f cpotrf2.f cpotri.f cpstrf.f cpstf2.f
+   cppcon.f cppequ.f cpprfs.f cppsv.f  cppsvx.f cpptrf.f cpptri.f cpptrs.f
+   cptcon.f cpteqr.f cptrfs.f cptsv.f  cptsvx.f cpttrf.f cpttrs.f cptts2.f
+   crot.f   cspcon.f csprfs.f cspsv.f
+   cspsvx.f csptrf.f csptri.f csptrs.f csrscl.f cstedc.f
+   cstegr.f cstein.f csteqr.f csycon.f
+   csyrfs.f csysv.f  csysvx.f csytf2.f csytrf.f csytri.f
+   csytri2.f csytri2x.f csyswapr.f
+   csytrs.f csytrs2.f
+   csyconv.f csyconvf.f csyconvf_rook.f
+   csytf2_rook.f csytrf_rook.f csytrs_rook.f
+   csytri_rook.f csycon_rook.f csysv_rook.f
+   csytf2_rk.f csytrf_rk.f csytrf_aa.f csytrs_3.f csytrs_aa.f
+   csytri_3.f csytri_3x.f csycon_3.f csysv_rk.f csysv_aa.f
+   ctbcon.f ctbrfs.f ctbtrs.f ctgevc.f ctgex2.f
+   ctgexc.f ctgsen.f ctgsja.f ctgsna.f ctgsy2.f ctgsyl.f ctpcon.f
+   ctprfs.f ctptri.f
+   ctptrs.f ctrcon.f ctrevc.f ctrevc3.f ctrexc.f ctrrfs.f ctrsen.f ctrsna.f
+   ctrsyl.f ctrtrs.f ctzrzf.f cung2l.f cung2r.f
+   cungbr.f cunghr.f cungl2.f cunglq.f cungql.f cungqr.f cungr2.f
+   cungrq.f cungtr.f cunm2l.f cunm2r.f cunmbr.f cunmhr.f cunml2.f cunm22.f
+   cunmlq.f cunmql.f cunmqr.f cunmr2.f cunmr3.f cunmrq.f cunmrz.f
+   cunmtr.f cupgtr.f cupmtr.f icmax1.f scsum1.f cstemr.f
+   chfrk.f ctfttp.f clanhf.f cpftrf.f cpftri.f cpftrs.f ctfsm.f ctftri.f
+   ctfttr.f ctpttf.f ctpttr.f ctrttf.f ctrttp.f
+   cgeequb.f cgbequb.f csyequb.f cpoequb.f cheequb.f
+   cbbcsd.f clapmr.f cunbdb.f cunbdb1.f cunbdb2.f cunbdb3.f cunbdb4.f
+   cunbdb5.f cunbdb6.f cuncsd.f cuncsd2by1.f
+   cgeqrt.f cgeqrt2.f cgeqrt3.f cgemqrt.f
+   ctpqrt.f ctpqrt2.f ctpmqrt.f ctprfb.f
+   cgelqt.f cgelqt3.f cgemlqt.f
+   cgetsls.f cgeqr.f clatsqr.f clamtsqr.f cgemqr.f
+   cgelq.f claswlq.f clamswlq.f cgemlq.f
+   ctplqt.f ctplqt2.f ctpmlqt.f
+   chetrd_2stage.f chetrd_he2hb.f chetrd_hb2st.F chb2st_kernels.f
+   cheevd_2stage.f cheev_2stage.f cheevx_2stage.f cheevr_2stage.f
+   chbev_2stage.f chbevx_2stage.f chbevd_2stage.f chegv_2stage.f)
 
-set(ZCLASRC cpotrs.f)
+set(CXLASRC cgesvxx.f cgerfsx.f cla_gerfsx_extended.f cla_geamv.f
+   cla_gercond_c.f cla_gercond_x.f cla_gerpvgrw.f
+   csysvxx.f csyrfsx.f cla_syrfsx_extended.f cla_syamv.f
+   cla_syrcond_c.f cla_syrcond_x.f cla_syrpvgrw.f
+   cposvxx.f cporfsx.f cla_porfsx_extended.f
+   cla_porcond_c.f cla_porcond_x.f cla_porpvgrw.f
+   cgbsvxx.f cgbrfsx.f cla_gbrfsx_extended.f cla_gbamv.f
+   cla_gbrcond_c.f cla_gbrcond_x.f cla_gbrpvgrw.f
+   chesvxx.f cherfsx.f cla_herfsx_extended.f cla_heamv.f
+   cla_hercond_c.f cla_hercond_x.f cla_herpvgrw.f
+   cla_lin_berr.f clarscl2.f clascl2.f cla_wwaddw.f)
 
 set(DLASRC
-  dgbbrd.f dgbcon.f dgbequ.f dgbrfs.f dgbsv.f
-  dgbsvx.f dgbtf2.f dgbtrf.f dgbtrs.f dgebak.f dgebal.f dgebd2.f
-  dgebrd.f dgecon.f dgeequ.f dgees.f  dgeesx.f dgeev.f  dgeevx.f
-  DEPRECATED/dgegs.f  DEPRECATED/dgegv.f  dgehd2.f dgehrd.f dgelq2.f dgelqf.f
-  dgels.f  dgelsd.f dgelss.f DEPRECATED/dgelsx.f dgelsy.f dgeql2.f dgeqlf.f
-  dgeqp3.f DEPRECATED/dgeqpf.f dgeqr2.f dgeqr2p.f dgeqrf.f dgeqrfp.f dgerfs.f
-  dgerq2.f dgerqf.f dgesc2.f dgesdd.f  dgesvd.f dgesvdx.f dgesvx.f
-  dgetc2.f dgetri.f dgetrf2.f
-  dggbak.f dggbal.f dgges.f  dgges3.f dggesx.f dggev.f dggev3.f  dggevx.f
-  dggglm.f dgghd3.f dgghrd.f dgglse.f dggqrf.f
-  dggrqf.f dggsvd3.f dggsvp3.f DEPRECATED/dggsvd.f DEPRECATED/dggsvp.f dgtcon.f dgtrfs.f dgtsv.f
-  dgtsvx.f dgttrf.f dgttrs.f dgtts2.f dhgeqz.f
-  dhsein.f dhseqr.f dlabrd.f dlacon.f dlacn2.f
-  dlaein.f dlaexc.f dlag2.f  dlags2.f dlagtm.f dlagv2.f dlahqr.f
-  DEPRECATED/dlahrd.f dlahr2.f dlaic1.f dlaln2.f dlals0.f dlalsa.f dlalsd.f
-  dlangb.f dlange.f dlangt.f dlanhs.f dlansb.f dlansp.f
-  dlansy.f dlantb.f dlantp.f dlantr.f dlanv2.f
-  dlapll.f dlapmt.f
-  dlaqgb.f dlaqge.f dlaqp2.f dlaqps.f dlaqsb.f dlaqsp.f dlaqsy.f
-  dlaqr0.f dlaqr1.f dlaqr2.f dlaqr3.f dlaqr4.f dlaqr5.f
-  dlaqtr.f dlar1v.f dlar2v.f iladlr.f iladlc.f
-  dlarf.f  dlarfb.f dlarfg.f dlarfgp.f dlarft.f dlarfx.f
-  dlargv.f dlarrv.f dlartv.f
-  dlarz.f  dlarzb.f dlarzt.f dlasy2.f dlasyf.f dlasyf_rook.f
-  dlatbs.f dlatdf.f dlatps.f dlatrd.f dlatrs.f dlatrz.f DEPRECATED/dlatzm.f
-  dopgtr.f dopmtr.f dorg2l.f dorg2r.f
-  dorgbr.f dorghr.f dorgl2.f dorglq.f dorgql.f dorgqr.f dorgr2.f
-  dorgrq.f dorgtr.f dorm2l.f dorm2r.f dorm22.f
-  dormbr.f dormhr.f dorml2.f dormlq.f dormql.f dormqr.f dormr2.f
-  dormr3.f dormrq.f dormrz.f dormtr.f dpbcon.f dpbequ.f dpbrfs.f
-  dpbstf.f dpbsv.f  dpbsvx.f
-  dpbtf2.f dpbtrf.f dpbtrs.f dpocon.f dpoequ.f dporfs.f dposv.f
-  dposvx.f dpotrf2.f dpotrs.f dpstrf.f dpstf2.f
-  dppcon.f dppequ.f
-  dpprfs.f dppsv.f  dppsvx.f dpptrf.f dpptri.f dpptrs.f dptcon.f
-  dpteqr.f dptrfs.f dptsv.f  dptsvx.f dpttrs.f dptts2.f drscl.f
-  dsbev.f  dsbevd.f dsbevx.f dsbgst.f dsbgv.f  dsbgvd.f dsbgvx.f
-  dsbtrd.f  dspcon.f dspev.f  dspevd.f dspevx.f dspgst.f
-  dspgv.f  dspgvd.f dspgvx.f dsprfs.f dspsv.f  dspsvx.f dsptrd.f
-  dsptrf.f dsptri.f dsptrs.f dstegr.f dstein.f dstev.f  dstevd.f dstevr.f
-  dstevx.f
-  dsycon.f dsyev.f  dsyevd.f dsyevr.f
-  dsyevx.f dsygs2.f dsygst.f dsygv.f  dsygvd.f dsygvx.f dsyrfs.f
-  dsysv.f  dsysvx.f
-  dsytd2.f dsytf2.f dsytrd.f dsytrf.f dsytri.f dsytri2.f dsytri2x.f
-  dsyswapr.f dsytrs.f dsytrs2.f dsyconv.f
-  dsytf2_rook.f dsytrf_rook.f dsytrs_rook.f
-  dsytri_rook.f dsycon_rook.f dsysv_rook.f
-  dtbcon.f dtbrfs.f dtbtrs.f dtgevc.f dtgex2.f dtgexc.f dtgsen.f
-  dtgsja.f dtgsna.f dtgsy2.f dtgsyl.f dtpcon.f dtprfs.f dtptri.f
-  dtptrs.f
-  dtrcon.f dtrevc.f dtrevc3.f dtrexc.f dtrrfs.f dtrsen.f dtrsna.f dtrsyl.f
-  dtrtrs.f DEPRECATED/dtzrqf.f dtzrzf.f dstemr.f
-  dsgesv.f dsposv.f dlag2s.f slag2d.f dlat2s.f
-  dlansf.f dpftrf.f dpftri.f dpftrs.f dsfrk.f dtfsm.f dtftri.f dtfttp.f
-  dtfttr.f dtpttf.f dtpttr.f dtrttf.f dtrttp.f
-  dgejsv.f  dgesvj.f  dgsvj0.f  dgsvj1.f
-  dgeequb.f dsyequb.f dpoequb.f dgbequb.f
-  dbbcsd.f dlapmr.f dorbdb.f dorbdb1.f dorbdb2.f dorbdb3.f dorbdb4.f
-  dorbdb5.f dorbdb6.f dorcsd.f dorcsd2by1.f
-  dgeqrt.f dgeqrt2.f dgeqrt3.f dgemqrt.f
-  dtpqrt.f dtpqrt2.f dtpmqrt.f dtprfb.f dpotri.f
-  dgelq.f dgelqt.f dgelqt3.f dgemlq.f dgemlqt.f dgemqr.f dgeqr.f dgetsls.f 
-  dlamswlq.f dlamtsqr.f dlaswlq.f dlatsqr.f dtplqt.f dtplqt2.f dtpmlqt.f 
-  dsysv_aa.f dsytrf_aa.f dsytrs_aa.f dlasyf_aa.f dsytf2_rk.f dlasyf_rk.f  
-  dsytrf_rk.f dsytrs_3.f dsycon_3.f dsytri_3.f dsytri_3x.f dsysv_rk.f   
-  dsb2st_kernels.f dsbev_2stage.f dsbevd_2stage.f dsbevx_2stage.f  
-  dsyev_2stage.f dsyevd_2stage.f dsyevr_2stage.f dsyevx_2stage.f  
-  dsygv_2stage.f dsytrd_2stage.f dsytrd_sb2st.F dsytrd_sy2sb.f dlarfy.f         
-)
+   dbdsvdx.f dgbbrd.f dgbcon.f dgbequ.f dgbrfs.f dgbsv.f
+   dgbsvx.f dgbtf2.f dgbtrf.f dgbtrs.f dgebak.f dgebal.f dgebd2.f
+   dgebrd.f dgecon.f dgeequ.f dgees.f  dgeesx.f dgeev.f  dgeevx.f
+   dgehd2.f dgehrd.f dgelq2.f dgelqf.f
+   dgels.f  dgelsd.f dgelss.f dgelsy.f dgeql2.f dgeqlf.f
+   dgeqp3.f dgeqr2.f dgeqr2p.f dgeqrf.f dgeqrfp.f dgerfs.f dgerq2.f dgerqf.f
+   dgesc2.f dgesdd.f dgesvd.f dgesvdx.f dgesvx.f dgetc2.f
+   dgetrf2.f dgetri.f
+   dggbak.f dggbal.f
+   dgges.f  dgges3.f dggesx.f dggev.f  dggev3.f dggevx.f
+   dggglm.f dgghrd.f dgghd3.f dgglse.f dggqrf.f
+   dggrqf.f dggsvd3.f dggsvp3.f dgtcon.f dgtrfs.f dgtsv.f
+   dgtsvx.f dgttrf.f dgttrs.f dgtts2.f dhgeqz.f
+   dhsein.f dhseqr.f dlabrd.f dlacon.f dlacn2.f
+   dlaein.f dlaexc.f dlag2.f  dlags2.f dlagtm.f dlagv2.f dlahqr.f
+   dlahr2.f dlaic1.f dlaln2.f dlals0.f dlalsa.f dlalsd.f
+   dlangb.f dlange.f dlangt.f dlanhs.f dlansb.f dlansp.f
+   dlansy.f dlantb.f dlantp.f dlantr.f dlanv2.f
+   dlapll.f dlapmt.f
+   dlaqgb.f dlaqge.f dlaqp2.f dlaqps.f dlaqsb.f dlaqsp.f dlaqsy.f
+   dlaqr0.f dlaqr1.f dlaqr2.f dlaqr3.f dlaqr4.f dlaqr5.f
+   dlaqtr.f dlar1v.f dlar2v.f iladlr.f iladlc.f
+   dlarf.f  dlarfb.f dlarfg.f dlarfgp.f dlarft.f dlarfx.f dlarfy.f
+   dlargv.f dlarrv.f dlartv.f
+   dlarz.f  dlarzb.f dlarzt.f dlasy2.f
+   dlasyf.f dlasyf_rook.f dlasyf_rk.f dlasyf_aa.f
+   dlatbs.f dlatdf.f dlatps.f dlatrd.f dlatrs.f dlatrz.f
+   dopgtr.f dopmtr.f dorg2l.f dorg2r.f
+   dorgbr.f dorghr.f dorgl2.f dorglq.f dorgql.f dorgqr.f dorgr2.f
+   dorgrq.f dorgtr.f dorm2l.f dorm2r.f dorm22.f
+   dormbr.f dormhr.f dorml2.f dormlq.f dormql.f dormqr.f dormr2.f
+   dormr3.f dormrq.f dormrz.f dormtr.f dpbcon.f dpbequ.f dpbrfs.f
+   dpbstf.f dpbsv.f  dpbsvx.f
+   dpbtf2.f dpbtrf.f dpbtrs.f dpocon.f dpoequ.f dporfs.f dposv.f
+   dposvx.f dpotrf2.f dpotri.f dpotrs.f dpstrf.f dpstf2.f
+   dppcon.f dppequ.f
+   dpprfs.f dppsv.f  dppsvx.f dpptrf.f dpptri.f dpptrs.f dptcon.f
+   dpteqr.f dptrfs.f dptsv.f  dptsvx.f dpttrs.f dptts2.f drscl.f
+   dsbev.f  dsbevd.f dsbevx.f dsbgst.f dsbgv.f  dsbgvd.f dsbgvx.f
+   dsbtrd.f dspcon.f dspev.f  dspevd.f dspevx.f dspgst.f
+   dspgv.f  dspgvd.f dspgvx.f dsprfs.f dspsv.f  dspsvx.f dsptrd.f
+   dsptrf.f dsptri.f dsptrs.f dstegr.f dstein.f dstev.f  dstevd.f dstevr.f
+   dstevx.f dsycon.f dsyev.f  dsyevd.f dsyevr.f
+   dsyevx.f dsygs2.f dsygst.f dsygv.f  dsygvd.f dsygvx.f dsyrfs.f
+   dsysv.f  dsysvx.f
+   dsytd2.f dsytf2.f dsytrd.f dsytrf.f dsytri.f dsytrs.f dsytrs2.f
+   dsytri2.f dsytri2x.f dsyswapr.f
+   dsyconv.f dsyconvf.f dsyconvf_rook.f
+   dsytf2_rook.f dsytrf_rook.f dsytrs_rook.f
+   dsytri_rook.f dsycon_rook.f dsysv_rook.f
+   dsytf2_rk.f dsytrf_rk.f dsytrs_3.f
+   dsytri_3.f dsytri_3x.f dsycon_3.f dsysv_rk.f
+   dsysv_aa.f dsytrf_aa.f dsytrs_aa.f
+   dtbcon.f
+   dtbrfs.f dtbtrs.f dtgevc.f dtgex2.f dtgexc.f dtgsen.f
+   dtgsja.f dtgsna.f dtgsy2.f dtgsyl.f dtpcon.f dtprfs.f dtptri.f
+   dtptrs.f
+   dtrcon.f dtrevc.f dtrevc3.f dtrexc.f dtrrfs.f dtrsen.f dtrsna.f dtrsyl.f
+   dtrtrs.f dtzrzf.f dstemr.f
+   dsgesv.f dsposv.f dlag2s.f slag2d.f dlat2s.f
+   dlansf.f dpftrf.f dpftri.f dpftrs.f dsfrk.f dtfsm.f dtftri.f dtfttp.f
+   dtfttr.f dtpttf.f dtpttr.f dtrttf.f dtrttp.f
+   dgejsv.f dgesvj.f dgsvj0.f dgsvj1.f
+   dgeequb.f dsyequb.f dpoequb.f dgbequb.f
+   dbbcsd.f dlapmr.f dorbdb.f dorbdb1.f dorbdb2.f dorbdb3.f dorbdb4.f
+   dorbdb5.f dorbdb6.f dorcsd.f dorcsd2by1.f
+   dgeqrt.f dgeqrt2.f dgeqrt3.f dgemqrt.f
+   dtpqrt.f dtpqrt2.f dtpmqrt.f dtprfb.f
+   dgelqt.f dgelqt3.f dgemlqt.f
+   dgetsls.f dgeqr.f dlatsqr.f dlamtsqr.f dgemqr.f
+   dgelq.f dlaswlq.f dlamswlq.f dgemlq.f
+   dtplqt.f dtplqt2.f dtpmlqt.f
+   dsytrd_2stage.f dsytrd_sy2sb.f dsytrd_sb2st.F dsb2st_kernels.f
+   dsyevd_2stage.f dsyev_2stage.f dsyevx_2stage.f dsyevr_2stage.f
+   dsbev_2stage.f dsbevx_2stage.f dsbevd_2stage.f dsygv_2stage.f)
+
+set(DXLASRC dgesvxx.f dgerfsx.f dla_gerfsx_extended.f dla_geamv.f
+   dla_gercond.f dla_gerpvgrw.f dsysvxx.f dsyrfsx.f
+   dla_syrfsx_extended.f dla_syamv.f dla_syrcond.f dla_syrpvgrw.f
+   dposvxx.f dporfsx.f dla_porfsx_extended.f dla_porcond.f
+   dla_porpvgrw.f dgbsvxx.f dgbrfsx.f dla_gbrfsx_extended.f
+   dla_gbamv.f dla_gbrcond.f dla_gbrpvgrw.f dla_lin_berr.f dlarscl2.f
+   dlascl2.f dla_wwaddw.f)
 
 set(ZLASRC
-  zbdsqr.f zgbbrd.f zgbcon.f zgbequ.f zgbrfs.f zgbsv.f  zgbsvx.f
-  zgbtf2.f zgbtrf.f zgbtrs.f zgebak.f zgebal.f zgebd2.f zgebrd.f
-  zgecon.f zgeequ.f zgees.f  zgeesx.f zgeev.f  zgeevx.f
-  DEPRECATED/zgegs.f  DEPRECATED/zgegv.f  zgehd2.f zgehrd.f zgejsv.f zgelq2.f zgelqf.f
-  zgels.f  zgelsd.f zgelss.f DEPRECATED/zgelsx.f zgelsy.f zgeql2.f zgeqlf.f zgeqp3.f
-  DEPRECATED/zgeqpf.f zgeqr2.f zgeqr2p.f zgeqrf.f zgeqrfp.f zgerfs.f zgerq2.f zgerqf.f
-  zgesc2.f zgesdd.f zgesvd.f zgesvdx.f zgesvj.f zgesvx.f zgetc2.f
-  zgetri.f zgetrf2.f
-  zggbak.f zggbal.f zgges.f zgges3.f zggesx.f zggev.f zggev3.f zggevx.f zggglm.f
-  zgghd3.f zgghrd.f zgglse.f zggqrf.f zggrqf.f
-  DEPRECATED/zggsvd.f zggsvd3.f DEPRECATED/zggsvp.f zggsvp3.f
-  zgsvj0.f zgsvj1.f
-  zgtcon.f zgtrfs.f zgtsv.f  zgtsvx.f zgttrf.f zgttrs.f zgtts2.f zhbev.f
-  zhbevd.f zhbevx.f zhbgst.f zhbgv.f  zhbgvd.f zhbgvx.f zhbtrd.f
-  zhecon.f zheev.f  zheevd.f zheevr.f zheevx.f zhegs2.f zhegst.f
-  zhegv.f  zhegvd.f zhegvx.f zherfs.f zhesv.f  zhesvx.f zhetd2.f
-  zhetf2.f zhetrd.f
-  zhetrf.f zhetri.f zhetri2.f zhetri2x.f zheswapr.f
-  zhetrs.f zhetrs2.f
-  zhetf2_rook.f zhetrf_rook.f zhetri_rook.f zhetrs_rook.f zhecon_rook.f zhesv_rook.f
-  zhgeqz.f zhpcon.f zhpev.f  zhpevd.f
-  zhpevx.f zhpgst.f zhpgv.f  zhpgvd.f zhpgvx.f zhprfs.f zhpsv.f
-  zhpsvx.f
-  zhptrd.f zhptrf.f zhptri.f zhptrs.f zhsein.f zhseqr.f zlabrd.f
-  zlacgv.f zlacon.f zlacn2.f zlacp2.f zlacpy.f zlacrm.f zlacrt.f zladiv.f
-  zlaed0.f zlaed7.f zlaed8.f
-  zlaein.f zlaesy.f zlaev2.f zlags2.f zlagtm.f
-  zlahef.f zlahef_rook.f zlahqr.f
-  DEPRECATED/zlahrd.f zlahr2.f zlaic1.f zlals0.f zlalsa.f zlalsd.f zlangb.f zlange.f
-  zlangt.f zlanhb.f
-  zlanhe.f
-  zlanhp.f zlanhs.f zlanht.f zlansb.f zlansp.f zlansy.f zlantb.f
-  zlantp.f zlantr.f zlapll.f zlapmt.f zlaqgb.f zlaqge.f
-  zlaqhb.f zlaqhe.f zlaqhp.f zlaqp2.f zlaqps.f zlaqsb.f
-  zlaqr0.f zlaqr1.f zlaqr2.f zlaqr3.f zlaqr4.f zlaqr5.f
-  zlaqsp.f zlaqsy.f zlar1v.f zlar2v.f ilazlr.f ilazlc.f
-  zlarcm.f zlarf.f  zlarfb.f
-  zlarfg.f zlarft.f zlarfgp.f
-  zlarfx.f zlargv.f zlarnv.f zlarrv.f zlartg.f zlartv.f
-  zlarz.f  zlarzb.f zlarzt.f zlascl.f zlaset.f zlasr.f
-  zlassq.f zlasyf.f zlasyf_rook.f zlasyf_aa.f
-  zlatbs.f zlatdf.f zlatps.f zlatrd.f zlatrs.f zlatrz.f DEPRECATED/zlatzm.f
-  zpbcon.f zpbequ.f zpbrfs.f zpbstf.f zpbsv.f
-  zpbsvx.f zpbtf2.f zpbtrf.f zpbtrs.f zpocon.f zpoequ.f zporfs.f
-  zposv.f  zposvx.f zpotrf2.f zpotrs.f zpstrf.f zpstf2.f
-  zppcon.f zppequ.f zpprfs.f zppsv.f  zppsvx.f zpptrf.f zpptri.f zpptrs.f
-  zptcon.f zpteqr.f zptrfs.f zptsv.f  zptsvx.f zpttrf.f zpttrs.f zptts2.f
-  zrot.f   zspcon.f zsprfs.f zspsv.f
-  zspsvx.f zsptrf.f zsptri.f zsptrs.f zdrscl.f zstedc.f
-  zstegr.f zstein.f zsteqr.f
-  zsycon.f zsysv_aa.f
-  zsyrfs.f zsysv.f  zsysvx.f zsytf2.f zsytrf.f zsytri.f zsytri2.f zsytri2x.f
-  zsyswapr.f zsytrs.f zsytrs_aa.f zsytrs2.f zsyconv.f
-  zsytf2_rook.f zsytrf_rook.f zsytrs_rook.f
-  zsytri_rook.f zsycon_rook.f zsysv_rook.f
-  ztbcon.f ztbrfs.f ztbtrs.f ztgevc.f ztgex2.f
-  ztgexc.f ztgsen.f ztgsja.f ztgsna.f ztgsy2.f ztgsyl.f ztpcon.f
-  ztprfs.f ztptri.f
-  ztptrs.f ztrcon.f ztrevc.f ztrevc3.f ztrexc.f ztrrfs.f ztrsen.f ztrsna.f
-  ztrsyl.f ztrtrs.f DEPRECATED/ztzrqf.f ztzrzf.f zung2l.f
-  zung2r.f zungbr.f zunghr.f zungl2.f zunglq.f zungql.f zungqr.f zungr2.f
-  zungrq.f zungtr.f zunm2l.f zunm2r.f zunmbr.f zunmhr.f zunm22.f zunml2.f
-  zunmlq.f zunmql.f zunmqr.f zunmr2.f zunmr3.f zunmrq.f zunmrz.f
-  zunmtr.f zupgtr.f
-  zupmtr.f izmax1.f dzsum1.f zstemr.f
-  zcgesv.f zcposv.f zlag2c.f clag2z.f zlat2c.f
-  zhfrk.f ztfttp.f zlanhf.f zpftrf.f zpftri.f zpftrs.f ztfsm.f ztftri.f
-  ztfttr.f ztpttf.f ztpttr.f ztrttf.f ztrttp.f
-  zgeequb.f zgbequb.f zsyequb.f zpoequb.f zheequb.f
-  zbbcsd.f zlapmr.f zunbdb.f zunbdb1.f zunbdb2.f zunbdb3.f zunbdb4.f
-  zunbdb5.f zunbdb6.f zuncsd.f zuncsd2by1.f
-  zgeqrt.f zgeqrt2.f zgeqrt3.f zgemqrt.f
-  ztpqrt.f ztpqrt2.f ztpmqrt.f ztprfb.f zpotri.f
-  zgelq.f zgelqt.f zgelqt3.f zgemlq.f zgemlqt.f zgemqr.f zgeqr.f zgetsls.f
-  zlamswlq.f zlamtsqr.f zlaswlq.f zlatsqr.f ztplqt.f ztplqt2.f ztpmlqt.f
-  zhesv_aa.f zhetrf_aa.f zhetrs_aa.f zlahef_aa.f zsytf2_rk.f zlasyf_rk.f
-  zsytrf_aa.f zsytrf_rk.f zsytrs_3.f zsycon_3.f zsytri_3.f zsytri_3x.f zsysv_rk.f
-  zhetf2_rk.f zlahef_rk.f zhetrf_rk.f zhetrs_3.f zhecon_3.f zhetri_3.f
-  zhetri_3x.f zhesv_rk.f zhb2st_kernels.f zhbev_2stage.f zhbevd_2stage.f
-  zhbevx_2stage.f zheev_2stage.f zheevd_2stage.f zheevr_2stage.f
-  zheevx_2stage.f zhegv_2stage.f zhetrd_2stage.f zhetrd_hb2st.F zhetrd_he2hb.f
-  zlarfy.f
-)
+   zbdsqr.f zgbbrd.f zgbcon.f zgbequ.f zgbrfs.f zgbsv.f  zgbsvx.f
+   zgbtf2.f zgbtrf.f zgbtrs.f zgebak.f zgebal.f zgebd2.f zgebrd.f
+   zgecon.f zgeequ.f zgees.f  zgeesx.f zgeev.f  zgeevx.f
+   zgehd2.f zgehrd.f zgelq2.f zgelqf.f
+   zgels.f  zgelsd.f zgelss.f zgelsy.f zgeql2.f zgeqlf.f zgeqp3.f
+   zgeqr2.f zgeqr2p.f zgeqrf.f zgeqrfp.f zgerfs.f zgerq2.f zgerqf.f
+   zgesc2.f zgesdd.f zgesvd.f zgesvdx.f zgesvx.f
+   zgesvj.f zgejsv.f zgsvj0.f zgsvj1.f
+   zgetc2.f zgetrf2.f
+   zgetri.f
+   zggbak.f zggbal.f
+   zgges.f  zgges3.f zggesx.f zggev.f  zggev3.f zggevx.f
+   zggglm.f zgghrd.f zgghd3.f zgglse.f zggqrf.f zggrqf.f
+   zggsvd3.f zggsvp3.f
+   zgtcon.f zgtrfs.f zgtsv.f  zgtsvx.f zgttrf.f zgttrs.f zgtts2.f zhbev.f
+   zhbevd.f zhbevx.f zhbgst.f zhbgv.f  zhbgvd.f zhbgvx.f zhbtrd.f
+   zhecon.f zheev.f  zheevd.f zheevr.f zheevx.f zhegs2.f zhegst.f
+   zhegv.f  zhegvd.f zhegvx.f zherfs.f zhesv.f  zhesvx.f zhetd2.f
+   zhetf2.f zhetrd.f
+   zhetrf.f zhetri.f zhetri2.f zhetri2x.f zheswapr.f
+   zhetrs.f zhetrs2.f
+   zhetf2_rook.f zhetrf_rook.f zhetri_rook.f
+   zhetrs_rook.f zhecon_rook.f zhesv_rook.f
+   zhetf2_rk.f zhetrf_rk.f zhetri_3.f zhetri_3x.f
+   zhetrs_3.f zhecon_3.f zhesv_rk.f
+   zhesv_aa.f zhetrf_aa.f zhetrs_aa.f
+   zhgeqz.f zhpcon.f zhpev.f  zhpevd.f
+   zhpevx.f zhpgst.f zhpgv.f  zhpgvd.f zhpgvx.f zhprfs.f zhpsv.f
+   zhpsvx.f
+   zhptrd.f zhptrf.f zhptri.f zhptrs.f zhsein.f zhseqr.f zlabrd.f
+   zlacgv.f zlacon.f zlacn2.f zlacp2.f zlacpy.f zlacrm.f zlacrt.f zladiv.f
+   zlaed0.f zlaed7.f zlaed8.f
+   zlaein.f zlaesy.f zlaev2.f zlags2.f zlagtm.f
+   zlahef.f zlahef_rook.f zlahef_rk.f zlahef_aa.f zlahqr.f
+   zlahr2.f zlaic1.f zlals0.f zlalsa.f zlalsd.f zlangb.f zlange.f
+   zlangt.f zlanhb.f
+   zlanhe.f
+   zlanhp.f zlanhs.f zlanht.f zlansb.f zlansp.f zlansy.f zlantb.f
+   zlantp.f zlantr.f zlapll.f zlapmt.f zlaqgb.f zlaqge.f
+   zlaqhb.f zlaqhe.f zlaqhp.f zlaqp2.f zlaqps.f zlaqsb.f
+   zlaqr0.f zlaqr1.f zlaqr2.f zlaqr3.f zlaqr4.f zlaqr5.f
+   zlaqsp.f zlaqsy.f zlar1v.f zlar2v.f ilazlr.f ilazlc.f
+   zlarcm.f zlarf.f  zlarfb.f
+   zlarfg.f zlarfgp.f zlarft.f
+   zlarfx.f zlarfy.f zlargv.f zlarnv.f zlarrv.f zlartg.f zlartv.f
+   zlarz.f  zlarzb.f zlarzt.f zlascl.f zlaset.f zlasr.f
+   zlassq.f zlasyf.f zlasyf_rook.f zlasyf_rk.f zlasyf_aa.f
+   zlatbs.f zlatdf.f zlatps.f zlatrd.f zlatrs.f zlatrz.f
+   zpbcon.f zpbequ.f zpbrfs.f zpbstf.f zpbsv.f
+   zpbsvx.f zpbtf2.f zpbtrf.f zpbtrs.f zpocon.f zpoequ.f zporfs.f
+   zposv.f  zposvx.f zpotrf2.f zpotri.f zpotrs.f zpstrf.f zpstf2.f
+   zppcon.f zppequ.f zpprfs.f zppsv.f  zppsvx.f zpptrf.f zpptri.f zpptrs.f
+   zptcon.f zpteqr.f zptrfs.f zptsv.f  zptsvx.f zpttrf.f zpttrs.f zptts2.f
+   zrot.f   zspcon.f zsprfs.f zspsv.f
+   zspsvx.f zsptrf.f zsptri.f zsptrs.f zdrscl.f zstedc.f
+   zstegr.f zstein.f zsteqr.f zsycon.f
+   zsyrfs.f zsysv.f  zsysvx.f zsytf2.f zsytrf.f zsytri.f
+   zsytri2.f zsytri2x.f zsyswapr.f
+   zsytrs.f zsytrs2.f
+   zsyconv.f zsyconvf.f zsyconvf_rook.f
+   zsytf2_rook.f zsytrf_rook.f zsytrs_rook.f zsytrs_aa.f
+   zsytri_rook.f zsycon_rook.f zsysv_rook.f
+   zsytf2_rk.f zsytrf_rk.f zsytrf_aa.f zsytrs_3.f
+   zsytri_3.f zsytri_3x.f zsycon_3.f zsysv_rk.f zsysv_aa.f
+   ztbcon.f ztbrfs.f ztbtrs.f ztgevc.f ztgex2.f
+   ztgexc.f ztgsen.f ztgsja.f ztgsna.f ztgsy2.f ztgsyl.f ztpcon.f
+   ztprfs.f ztptri.f
+   ztptrs.f ztrcon.f ztrevc.f ztrevc3.f ztrexc.f ztrrfs.f ztrsen.f ztrsna.f
+   ztrsyl.f ztrtrs.f ztzrzf.f zung2l.f
+   zung2r.f zungbr.f zunghr.f zungl2.f zunglq.f zungql.f zungqr.f zungr2.f
+   zungrq.f zungtr.f zunm2l.f zunm2r.f zunmbr.f zunmhr.f zunml2.f zunm22.f
+   zunmlq.f zunmql.f zunmqr.f zunmr2.f zunmr3.f zunmrq.f zunmrz.f
+   zunmtr.f zupgtr.f
+   zupmtr.f izmax1.f dzsum1.f zstemr.f
+   zcgesv.f zcposv.f zlag2c.f clag2z.f zlat2c.f
+   zhfrk.f ztfttp.f zlanhf.f zpftrf.f zpftri.f zpftrs.f ztfsm.f ztftri.f
+   ztfttr.f ztpttf.f ztpttr.f ztrttf.f ztrttp.f
+   zgeequb.f zgbequb.f zsyequb.f zpoequb.f zheequb.f
+   zbbcsd.f zlapmr.f zunbdb.f zunbdb1.f zunbdb2.f zunbdb3.f zunbdb4.f
+   zunbdb5.f zunbdb6.f zuncsd.f zuncsd2by1.f
+   zgeqrt.f zgeqrt2.f zgeqrt3.f zgemqrt.f
+   ztpqrt.f ztpqrt2.f ztpmqrt.f ztprfb.f
+   ztplqt.f ztplqt2.f ztpmlqt.f
+   zgelqt.f zgelqt3.f zgemlqt.f
+   zgetsls.f zgeqr.f zlatsqr.f zlamtsqr.f zgemqr.f
+   zgelq.f zlaswlq.f zlamswlq.f zgemlq.f
+   zhetrd_2stage.f zhetrd_he2hb.f zhetrd_hb2st.F zhb2st_kernels.f
+   zheevd_2stage.f zheev_2stage.f zheevx_2stage.f zheevr_2stage.f
+   zhbev_2stage.f zhbevx_2stage.f zhbevd_2stage.f zhegv_2stage.f)
+
+set(ZXLASRC zgesvxx.f zgerfsx.f zla_gerfsx_extended.f zla_geamv.f
+   zla_gercond_c.f zla_gercond_x.f zla_gerpvgrw.f zsysvxx.f zsyrfsx.f
+   zla_syrfsx_extended.f zla_syamv.f zla_syrcond_c.f zla_syrcond_x.f
+   zla_syrpvgrw.f zposvxx.f zporfsx.f zla_porfsx_extended.f
+   zla_porcond_c.f zla_porcond_x.f zla_porpvgrw.f zgbsvxx.f zgbrfsx.f
+   zla_gbrfsx_extended.f zla_gbamv.f zla_gbrcond_c.f zla_gbrcond_x.f
+   zla_gbrpvgrw.f zhesvxx.f zherfsx.f zla_herfsx_extended.f
+   zla_heamv.f zla_hercond_c.f zla_hercond_x.f zla_herpvgrw.f
+   zla_lin_berr.f zlarscl2.f zlascl2.f zla_wwaddw.f)
+
 
-set(LA_REL_SRC ${ALLAUX})
-if (BUILD_SINGLE)
-  list(APPEND LA_REL_SRC ${SLASRC} ${DSLASRC} ${SCLAUX})
-endif ()
+if(USE_XBLAS)
+  set(ALLXOBJ ${SXLASRC} ${DXLASRC} ${CXLASRC} ${ZXLASRC})
+endif()
 
-if (BUILD_DOUBLE)
-  list(APPEND LA_REL_SRC ${DLASRC} ${DSLASRC} ${DZLAUX})
-endif ()
+list(APPEND SLASRC DEPRECATED/sgegs.f DEPRECATED/sgegv.f
+  DEPRECATED/sgeqpf.f DEPRECATED/sgelsx.f DEPRECATED/sggsvd.f
+  DEPRECATED/sggsvp.f DEPRECATED/slahrd.f DEPRECATED/slatzm.f DEPRECATED/stzrqf.f)
+list(APPEND DLASRC DEPRECATED/dgegs.f DEPRECATED/dgegv.f
+  DEPRECATED/dgeqpf.f DEPRECATED/dgelsx.f DEPRECATED/dggsvd.f
+  DEPRECATED/dggsvp.f DEPRECATED/dlahrd.f DEPRECATED/dlatzm.f DEPRECATED/dtzrqf.f)
+list(APPEND CLASRC DEPRECATED/cgegs.f DEPRECATED/cgegv.f
+  DEPRECATED/cgeqpf.f DEPRECATED/cgelsx.f DEPRECATED/cggsvd.f
+  DEPRECATED/cggsvp.f DEPRECATED/clahrd.f DEPRECATED/clatzm.f DEPRECATED/ctzrqf.f)
+list(APPEND ZLASRC DEPRECATED/zgegs.f DEPRECATED/zgegv.f
+  DEPRECATED/zgeqpf.f DEPRECATED/zgelsx.f DEPRECATED/zggsvd.f
+  DEPRECATED/zggsvp.f DEPRECATED/zlahrd.f DEPRECATED/zlatzm.f DEPRECATED/ztzrqf.f)
+message(STATUS "Building deprecated routines")
+
+set(DSLASRC spotrs.f)
+
+set(ZCLASRC cpotrs.f)
 
-if (BUILD_COMPLEX)
-  list(APPEND LA_REL_SRC ${CLASRC} ${ZCLASRC} ${SCLAUX})
-endif ()
+set(SCATGEN slatm1.f slaran.f slarnd.f)
 
-if (BUILD_COMPLEX16)
-  list(APPEND LA_REL_SRC ${ZLASRC} ${ZCLASRC} ${DZLAUX})
-endif ()
+set(SMATGEN slatms.f slatme.f slatmr.f slatmt.f
+   slagge.f slagsy.f slakf2.f slarge.f slaror.f slarot.f slatm2.f
+   slatm3.f slatm5.f slatm6.f slatm7.f slahilb.f)
+
+set(CMATGEN clatms.f clatme.f clatmr.f clatmt.f
+   clagge.f claghe.f clagsy.f clakf2.f clarge.f claror.f clarot.f
+   clatm1.f clarnd.f clatm2.f clatm3.f clatm5.f clatm6.f clahilb.f slatm7.f)
+
+set(DZATGEN dlatm1.f dlaran.f dlarnd.f)
+
+set(DMATGEN dlatms.f dlatme.f dlatmr.f dlatmt.f
+   dlagge.f dlagsy.f dlakf2.f dlarge.f dlaror.f dlarot.f dlatm2.f
+   dlatm3.f dlatm5.f dlatm6.f dlatm7.f dlahilb.f)
+
+set(ZMATGEN zlatms.f zlatme.f zlatmr.f zlatmt.f
+  zlagge.f zlaghe.f zlagsy.f zlakf2.f zlarge.f zlaror.f zlarot.f
+  zlatm1.f zlarnd.f zlatm2.f zlatm3.f zlatm5.f zlatm6.f zlahilb.f dlatm7.f)
+
+if(BUILD_SINGLE)
+  set(LA_REL_SRC ${SLASRC} ${DSLASRC} ${ALLAUX} ${SCLAUX})
+  set(LA_GEN_SRC ${SMATGEN} ${SCATGEN})
+  message(STATUS "Building Single Precision")
+endif()
+if(BUILD_DOUBLE)
+  set(LA_REL_SRC ${LA_REL_SRC} ${DLASRC} ${DSLASRC} ${ALLAUX} ${DZLAUX})
+  set(LA_GEN_SRC ${LA_GEN_SRC} ${DMATGEN} ${DZATGEN})
+  message(STATUS "Building Double Precision")
+endif()
+if(BUILD_COMPLEX)
+  set(LA_REL_SRC ${LA_REL_SRC} ${CLASRC} ${ZCLASRC} ${ALLAUX} ${SCLAUX})
+  SET(LA_GEN_SRC ${LA_GEN_SRC} ${CMATGEN} ${SCATGEN})
+  message(STATUS "Building Complex Precision")
+endif()
+if(BUILD_COMPLEX16)
+  set(LA_REL_SRC ${LA_REL_SRC} ${ZLASRC} ${ZCLASRC} ${ALLAUX} ${DZLAUX})
+  SET(LA_GEN_SRC ${LA_GEN_SRC} ${ZMATGEN} ${DZATGEN})
+  message(STATUS "Building Double Complex Precision")
+endif()
 
 # add lapack-netlib folder to the sources
 set(LA_SOURCES "")
 foreach (LA_FILE ${LA_REL_SRC})
   list(APPEND LA_SOURCES "${NETLIB_LAPACK_DIR}/SRC/${LA_FILE}")
 endforeach ()
+foreach (LA_FILE ${LA_GEN_SRC})
+  list(APPEND LA_SOURCES "${NETLIB_LAPACK_DIR}/TESTING/MATGEN/${LA_FILE}")
+endforeach ()
 set_source_files_properties(${LA_SOURCES} PROPERTIES COMPILE_FLAGS "${LAPACK_FFLAGS}")

From 505dc08635aa90c5485b5e8e16243493751d9abe Mon Sep 17 00:00:00 2001
From: Ian Henriksen <insertinterestingnamehere@gmail.com>
Date: Mon, 6 Nov 2017 14:43:33 -0600
Subject: [PATCH 3/6] Update lapacke.cmake with routines added in LAPACK 3.7.0.

---
 cmake/lapacke.cmake | 177 ++++++++++++++++++++++++++--------------------------
 1 file changed, 87 insertions(+), 90 deletions(-)

diff --git a/cmake/lapacke.cmake b/cmake/lapacke.cmake
index fd5aee134..93e2824a1 100644
--- a/cmake/lapacke.cmake
+++ b/cmake/lapacke.cmake
@@ -1,5 +1,5 @@
 
-set(C_SRC
+set(CSRC
   lapacke_cbbcsd.c
   lapacke_cbbcsd_work.c
   lapacke_cbdsqr.c
@@ -1839,6 +1839,12 @@ set(ZSRC
   lapacke_zhbevd_work.c
   lapacke_zhbevx.c
   lapacke_zhbevx_work.c
+  lapacke_zhbev_2stage.c
+  lapacke_zhbev_2stage_work.c
+  lapacke_zhbevd_2stage.c
+  lapacke_zhbevd_2stage_work.c
+  lapacke_zhbevx_2stage.c
+  lapacke_zhbevx_2stage_work.c
   lapacke_zhbgst.c
   lapacke_zhbgst_work.c
   lapacke_zhbgv.c
@@ -2263,104 +2269,91 @@ set(ZSRC
 )
 
 set(SRCX
-  lapacke_cgbrfsx.c       lapacke_cporfsx.c       lapacke_dgerfsx.c       lapacke_sgbrfsx.c       lapacke_ssyrfsx.c       lapacke_zherfsx.c 
-  lapacke_cgbrfsx_work.c  lapacke_cporfsx_work.c  lapacke_dgerfsx_work.c  lapacke_sgbrfsx_work.c  lapacke_ssyrfsx_work.c  lapacke_zherfsx_work.c 
-  lapacke_cgerfsx.c       lapacke_csyrfsx.c       lapacke_dporfsx.c       lapacke_sgerfsx.c       lapacke_zgbrfsx.c       lapacke_zporfsx.c 
-  lapacke_cgerfsx_work.c  lapacke_csyrfsx_work.c  lapacke_dporfsx_work.c  lapacke_sgerfsx_work.c  lapacke_zgbrfsx_work.c  lapacke_zporfsx_work.c 
-  lapacke_cherfsx.c       lapacke_dgbrfsx.c       lapacke_dsyrfsx.c       lapacke_sporfsx.c       lapacke_zgerfsx.c       lapacke_zsyrfsx.c 
-  lapacke_cherfsx_work.c  lapacke_dgbrfsx_work.c  lapacke_dsyrfsx_work.c  lapacke_sporfsx_work.c  lapacke_zgerfsx_work.c  lapacke_zsyrfsx_work.c 
-  lapacke_cgbsvxx.c       lapacke_cposvxx.c       lapacke_dgesvxx.c       lapacke_sgbsvxx.c       lapacke_ssysvxx.c       lapacke_zhesvxx.c 
-  lapacke_cgbsvxx_work.c  lapacke_cposvxx_work.c  lapacke_dgesvxx_work.c  lapacke_sgbsvxx_work.c  lapacke_ssysvxx_work.c  lapacke_zhesvxx_work.c 
-  lapacke_cgesvxx.c       lapacke_csysvxx.c       lapacke_dposvxx.c       lapacke_sgesvxx.c       lapacke_zgbsvxx.c       lapacke_zposvxx.c 
-  lapacke_cgesvxx_work.c  lapacke_csysvxx_work.c  lapacke_dposvxx_work.c  lapacke_sgesvxx_work.c  lapacke_zgbsvxx_work.c  lapacke_zposvxx_work.c 
-  lapacke_chesvxx.c       lapacke_dgbsvxx.c       lapacke_dsysvxx.c       lapacke_sposvxx.c       lapacke_zgesvxx.c       lapacke_zsysvxx.c 
+  lapacke_cgbrfsx.c       lapacke_cporfsx.c       lapacke_dgerfsx.c       lapacke_sgbrfsx.c       lapacke_ssyrfsx.c       lapacke_zherfsx.c
+  lapacke_cgbrfsx_work.c  lapacke_cporfsx_work.c  lapacke_dgerfsx_work.c  lapacke_sgbrfsx_work.c  lapacke_ssyrfsx_work.c  lapacke_zherfsx_work.c
+  lapacke_cgerfsx.c       lapacke_csyrfsx.c       lapacke_dporfsx.c       lapacke_sgerfsx.c       lapacke_zgbrfsx.c       lapacke_zporfsx.c
+  lapacke_cgerfsx_work.c  lapacke_csyrfsx_work.c  lapacke_dporfsx_work.c  lapacke_sgerfsx_work.c  lapacke_zgbrfsx_work.c  lapacke_zporfsx_work.c
+  lapacke_cherfsx.c       lapacke_dgbrfsx.c       lapacke_dsyrfsx.c       lapacke_sporfsx.c       lapacke_zgerfsx.c       lapacke_zsyrfsx.c
+  lapacke_cherfsx_work.c  lapacke_dgbrfsx_work.c  lapacke_dsyrfsx_work.c  lapacke_sporfsx_work.c  lapacke_zgerfsx_work.c  lapacke_zsyrfsx_work.c
+  lapacke_cgbsvxx.c       lapacke_cposvxx.c       lapacke_dgesvxx.c       lapacke_sgbsvxx.c       lapacke_ssysvxx.c       lapacke_zhesvxx.c
+  lapacke_cgbsvxx_work.c  lapacke_cposvxx_work.c  lapacke_dgesvxx_work.c  lapacke_sgbsvxx_work.c  lapacke_ssysvxx_work.c  lapacke_zhesvxx_work.c
+  lapacke_cgesvxx.c       lapacke_csysvxx.c       lapacke_dposvxx.c       lapacke_sgesvxx.c       lapacke_zgbsvxx.c       lapacke_zposvxx.c
+  lapacke_cgesvxx_work.c  lapacke_csysvxx_work.c  lapacke_dposvxx_work.c  lapacke_sgesvxx_work.c  lapacke_zgbsvxx_work.c  lapacke_zposvxx_work.c
+  lapacke_chesvxx.c       lapacke_dgbsvxx.c       lapacke_dsysvxx.c       lapacke_sposvxx.c       lapacke_zgesvxx.c       lapacke_zsysvxx.c
   lapacke_chesvxx_work.c  lapacke_dgbsvxx_work.c  lapacke_dsysvxx_work.c  lapacke_sposvxx_work.c  lapacke_zgesvxx_work.c  lapacke_zsysvxx_work.c
 )
 
 
-# FILE PARTS OF TMGLIB 
+# FILE PARTS OF TMGLIB
 set(MATGEN
-  lapacke_clatms.c 
-  lapacke_clatms_work.c 
-  lapacke_dlatms.c 
-  lapacke_dlatms_work.c 
-  lapacke_slatms.c 
-  lapacke_slatms_work.c 
-  lapacke_zlatms.c 
-  lapacke_zlatms_work.c 
-  lapacke_clagge.c 
-  lapacke_clagge_work.c 
-  lapacke_dlagge.c 
-  lapacke_dlagge_work.c 
-  lapacke_slagge.c 
-  lapacke_slagge_work.c 
-  lapacke_zlagge.c 
-  lapacke_zlagge_work.c 
-  lapacke_claghe.c 
-  lapacke_claghe_work.c 
-  lapacke_zlaghe.c 
-  lapacke_zlaghe_work.c 
-  lapacke_clagsy.c 
-  lapacke_clagsy_work.c 
-  lapacke_dlagsy.c 
-  lapacke_dlagsy_work.c 
-  lapacke_slagsy.c 
-  lapacke_slagsy_work.c 
-  lapacke_zlagsy.c 
+  lapacke_clatms.c
+  lapacke_clatms_work.c
+  lapacke_dlatms.c
+  lapacke_dlatms_work.c
+  lapacke_slatms.c
+  lapacke_slatms_work.c
+  lapacke_zlatms.c
+  lapacke_zlatms_work.c
+  lapacke_clagge.c
+  lapacke_clagge_work.c
+  lapacke_dlagge.c
+  lapacke_dlagge_work.c
+  lapacke_slagge.c
+  lapacke_slagge_work.c
+  lapacke_zlagge.c
+  lapacke_zlagge_work.c
+  lapacke_claghe.c
+  lapacke_claghe_work.c
+  lapacke_zlaghe.c
+  lapacke_zlaghe_work.c
+  lapacke_clagsy.c
+  lapacke_clagsy_work.c
+  lapacke_dlagsy.c
+  lapacke_dlagsy_work.c
+  lapacke_slagsy.c
+  lapacke_slagsy_work.c
+  lapacke_zlagsy.c
   lapacke_zlagsy_work.c
 )
 
 set(Utils_SRC
-lapacke_cgb_nancheck.c  lapacke_dpf_nancheck.c         lapacke_ssy_trans.c
-lapacke_cgb_trans.c     lapacke_dpf_trans.c            lapacke_stb_nancheck.c
-lapacke_cge_nancheck.c  lapacke_dpo_nancheck.c         lapacke_stb_trans.c
-lapacke_cge_trans.c     lapacke_dpo_trans.c            lapacke_stf_nancheck.c
-lapacke_cgg_nancheck.c  lapacke_dpp_nancheck.c         lapacke_stf_trans.c
-lapacke_cgg_trans.c     lapacke_dpp_trans.c            lapacke_stp_nancheck.c
-lapacke_cgt_nancheck.c  lapacke_dpt_nancheck.c         lapacke_stp_trans.c
-lapacke_chb_nancheck.c  lapacke_dsb_nancheck.c         lapacke_str_nancheck.c
-lapacke_chb_trans.c     lapacke_dsb_trans.c            lapacke_str_trans.c
-lapacke_che_nancheck.c  lapacke_dsp_nancheck.c         lapacke_xerbla.c
-lapacke_che_trans.c     lapacke_dsp_trans.c            lapacke_zgb_nancheck.c
-lapacke_chp_nancheck.c  lapacke_dst_nancheck.c         lapacke_zgb_trans.c
-lapacke_chp_trans.c     lapacke_dsy_nancheck.c         lapacke_zge_nancheck.c
-lapacke_chs_nancheck.c  lapacke_dsy_trans.c            lapacke_zge_trans.c
-lapacke_chs_trans.c     lapacke_dtb_nancheck.c         lapacke_zgg_nancheck.c
-lapacke_c_nancheck.c    lapacke_dtb_trans.c            lapacke_zgg_trans.c
-lapacke_cpb_nancheck.c  lapacke_dtf_nancheck.c         lapacke_zgt_nancheck.c
-lapacke_cpb_trans.c     lapacke_dtf_trans.c            lapacke_zhb_nancheck.c
-lapacke_cpf_nancheck.c  lapacke_dtp_nancheck.c         lapacke_zhb_trans.c
-lapacke_cpf_trans.c     lapacke_dtp_trans.c            lapacke_zhe_nancheck.c
-lapacke_cpo_nancheck.c  lapacke_dtr_nancheck.c         lapacke_zhe_trans.c
-lapacke_cpo_trans.c     lapacke_dtr_trans.c            lapacke_zhp_nancheck.c
-lapacke_cpp_nancheck.c  lapacke_lsame.c                lapacke_zhp_trans.c
-lapacke_cpp_trans.c     lapacke_make_complex_double.c  lapacke_zhs_nancheck.c
-lapacke_cpt_nancheck.c  lapacke_make_complex_float.c   lapacke_zhs_trans.c
-lapacke_csp_nancheck.c  lapacke_sgb_nancheck.c         lapacke_z_nancheck.c
-lapacke_csp_trans.c     lapacke_sgb_trans.c            lapacke_zpb_nancheck.c
-lapacke_cst_nancheck.c  lapacke_sge_nancheck.c         lapacke_zpb_trans.c
-lapacke_csy_nancheck.c  lapacke_sge_trans.c            lapacke_zpf_nancheck.c
-lapacke_csy_trans.c     lapacke_sgg_nancheck.c         lapacke_zpf_trans.c
-lapacke_ctb_nancheck.c  lapacke_sgg_trans.c            lapacke_zpo_nancheck.c
-lapacke_ctb_trans.c     lapacke_sgt_nancheck.c         lapacke_zpo_trans.c
-lapacke_ctf_nancheck.c  lapacke_shs_nancheck.c         lapacke_zpp_nancheck.c
-lapacke_ctf_trans.c     lapacke_shs_trans.c            lapacke_zpp_trans.c
-lapacke_ctp_nancheck.c  lapacke_s_nancheck.c           lapacke_zpt_nancheck.c
-lapacke_ctp_trans.c     lapacke_spb_nancheck.c         lapacke_zsp_nancheck.c
-lapacke_ctr_nancheck.c  lapacke_spb_trans.c            lapacke_zsp_trans.c
-lapacke_ctr_trans.c     lapacke_spf_nancheck.c         lapacke_zst_nancheck.c
-lapacke_dgb_nancheck.c  lapacke_spf_trans.c            lapacke_zsy_nancheck.c
-lapacke_dgb_trans.c     lapacke_spo_nancheck.c         lapacke_zsy_trans.c
-lapacke_dge_nancheck.c  lapacke_spo_trans.c            lapacke_ztb_nancheck.c
-lapacke_dge_trans.c     lapacke_spp_nancheck.c         lapacke_ztb_trans.c
-lapacke_dgg_nancheck.c  lapacke_spp_trans.c            lapacke_ztf_nancheck.c
-lapacke_dgg_trans.c     lapacke_spt_nancheck.c         lapacke_ztf_trans.c
-lapacke_dgt_nancheck.c  lapacke_ssb_nancheck.c         lapacke_ztp_nancheck.c
-lapacke_dhs_nancheck.c  lapacke_ssb_trans.c            lapacke_ztp_trans.c
-lapacke_dhs_trans.c     lapacke_ssp_nancheck.c         lapacke_ztr_nancheck.c
-lapacke_d_nancheck.c    lapacke_ssp_trans.c            lapacke_ztr_trans.c
-lapacke_dpb_nancheck.c  lapacke_sst_nancheck.c
-lapacke_dpb_trans.c     lapacke_ssy_nancheck.c
+  lapacke_c_nancheck.c            lapacke_ctr_trans.c             lapacke_make_complex_float.c    lapacke_zgb_nancheck.c
+  lapacke_cgb_nancheck.c          lapacke_d_nancheck.c            lapacke_s_nancheck.c            lapacke_zgb_trans.c
+  lapacke_cgb_trans.c             lapacke_dgb_nancheck.c          lapacke_sgb_nancheck.c          lapacke_zge_nancheck.c
+  lapacke_cge_nancheck.c          lapacke_dgb_trans.c             lapacke_sgb_trans.c             lapacke_zge_trans.c
+  lapacke_cge_trans.c             lapacke_dge_nancheck.c          lapacke_sge_nancheck.c          lapacke_zgg_nancheck.c
+  lapacke_cgg_nancheck.c          lapacke_dge_trans.c             lapacke_sge_trans.c             lapacke_zgg_trans.c
+  lapacke_cgg_trans.c             lapacke_dgg_nancheck.c          lapacke_sgg_nancheck.c          lapacke_zgt_nancheck.c
+  lapacke_cgt_nancheck.c          lapacke_dgg_trans.c             lapacke_sgg_trans.c             lapacke_zhb_nancheck.c
+  lapacke_chb_nancheck.c          lapacke_dgt_nancheck.c          lapacke_sgt_nancheck.c          lapacke_zhb_trans.c
+  lapacke_chb_trans.c             lapacke_dhs_nancheck.c          lapacke_shs_nancheck.c          lapacke_zhe_nancheck.c
+  lapacke_che_nancheck.c          lapacke_dhs_trans.c             lapacke_shs_trans.c             lapacke_zhe_trans.c
+  lapacke_che_trans.c             lapacke_dpb_nancheck.c          lapacke_spb_nancheck.c          lapacke_zhp_nancheck.c
+  lapacke_chp_nancheck.c          lapacke_dpb_trans.c             lapacke_spb_trans.c             lapacke_zhp_trans.c
+  lapacke_chp_trans.c             lapacke_dpf_nancheck.c          lapacke_spf_nancheck.c          lapacke_zhs_nancheck.c
+  lapacke_chs_nancheck.c          lapacke_dpf_trans.c             lapacke_spf_trans.c             lapacke_zhs_trans.c
+  lapacke_chs_trans.c             lapacke_dpo_nancheck.c          lapacke_spo_nancheck.c          lapacke_zpb_nancheck.c
+  lapacke_cpb_nancheck.c          lapacke_dpo_trans.c             lapacke_spo_trans.c             lapacke_zpb_trans.c
+  lapacke_cpb_trans.c             lapacke_dpp_nancheck.c          lapacke_spp_nancheck.c          lapacke_zpf_nancheck.c
+  lapacke_cpf_nancheck.c          lapacke_dpp_trans.c             lapacke_spp_trans.c             lapacke_zpf_trans.c
+  lapacke_cpf_trans.c             lapacke_dpt_nancheck.c          lapacke_spt_nancheck.c          lapacke_zpo_nancheck.c
+  lapacke_cpo_nancheck.c          lapacke_dsb_nancheck.c          lapacke_ssb_nancheck.c          lapacke_zpo_trans.c
+  lapacke_cpo_trans.c             lapacke_dsb_trans.c             lapacke_ssb_trans.c             lapacke_zpp_nancheck.c
+  lapacke_cpp_nancheck.c          lapacke_dsp_nancheck.c          lapacke_ssp_nancheck.c          lapacke_zpp_trans.c
+  lapacke_cpp_trans.c             lapacke_dsp_trans.c             lapacke_ssp_trans.c             lapacke_zpt_nancheck.c
+  lapacke_cpt_nancheck.c          lapacke_dst_nancheck.c          lapacke_sst_nancheck.c          lapacke_zsp_nancheck.c
+  lapacke_csp_nancheck.c          lapacke_dsy_nancheck.c          lapacke_ssy_nancheck.c          lapacke_zsp_trans.c
+  lapacke_csp_trans.c             lapacke_dsy_trans.c             lapacke_ssy_trans.c             lapacke_zst_nancheck.c
+  lapacke_cst_nancheck.c          lapacke_dtb_nancheck.c          lapacke_stb_nancheck.c          lapacke_zsy_nancheck.c
+  lapacke_csy_nancheck.c          lapacke_dtb_trans.c             lapacke_stb_trans.c             lapacke_zsy_trans.c
+  lapacke_csy_trans.c             lapacke_dtf_nancheck.c          lapacke_stf_nancheck.c          lapacke_ztb_nancheck.c
+  lapacke_ctb_nancheck.c          lapacke_dtf_trans.c             lapacke_stf_trans.c             lapacke_ztb_trans.c
+  lapacke_ctb_trans.c             lapacke_dtp_nancheck.c          lapacke_stp_nancheck.c          lapacke_ztf_nancheck.c
+  lapacke_ctf_nancheck.c          lapacke_dtp_trans.c             lapacke_stp_trans.c             lapacke_ztf_trans.c
+  lapacke_ctf_trans.c             lapacke_dtr_nancheck.c          lapacke_str_nancheck.c          lapacke_ztp_nancheck.c
+  lapacke_ctp_nancheck.c          lapacke_dtr_trans.c             lapacke_str_trans.c             lapacke_ztp_trans.c
+  lapacke_ctp_trans.c             lapacke_lsame.c                 lapacke_xerbla.c                lapacke_ztr_nancheck.c
+  lapacke_ctr_nancheck.c          lapacke_make_complex_double.c   lapacke_z_nancheck.c            lapacke_ztr_trans.c
 )
 
 set(LAPACKE_REL_SRC "")
@@ -2380,6 +2373,10 @@ if (BUILD_COMPLEX16)
   list(APPEND LAPACKE_REL_SRC ${ZSRC})
 endif ()
 
+if (BUILD_MATGEN)
+  list(APPEND LAPACKE_REL_SRC ${MATGEN})
+endif ()
+
 # add lapack-netlib folder to the sources
 set(LAPACKE_SOURCES "")
 foreach (LAE_FILE ${LAPACKE_REL_SRC})

From 72956e8950bfcf304be701174d8dedf8aefb7270 Mon Sep 17 00:00:00 2001
From: Ian Henriksen <insertinterestingnamehere@gmail.com>
Date: Mon, 6 Nov 2017 14:47:27 -0600
Subject: [PATCH 4/6] Build MATGEN LAPACK routines by default when building
 with CMake.

---
 CMakeLists.txt | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 4fdfb3ffa..6c52b2501 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -70,6 +70,10 @@ if (NOT DEFINED BUILD_SINGLE AND NOT DEFINED BUILD_DOUBLE AND NOT DEFINED BUILD_
   set(BUILD_COMPLEX16 true)
 endif ()
 
+if (NOT DEFINED BUILD_MATGEN)
+  set(BUILD_MATGEN true)
+endif()
+
 set(FLOAT_TYPES "")
 if (BUILD_SINGLE)
   message(STATUS "Building Single Precision")
@@ -163,7 +167,7 @@ set_target_properties( ${OpenBLAS_LIBNAME} PROPERTIES LIBRARY_OUTPUT_NAME_DEBUG
 
 foreach (OUTPUTCONFIG ${CMAKE_CONFIGURATION_TYPES})
   string( TOUPPER ${OUTPUTCONFIG} OUTPUTCONFIG )
-  
+
   set_target_properties( ${OpenBLAS_LIBNAME} PROPERTIES RUNTIME_OUTPUT_DIRECTORY_${OUTPUTCONFIG} ${PROJECT_BINARY_DIR}/lib/${OUTPUTCONFIG} )
   set_target_properties( ${OpenBLAS_LIBNAME} PROPERTIES LIBRARY_OUTPUT_DIRECTORY_${OUTPUTCONFIG} ${PROJECT_BINARY_DIR}/lib/${OUTPUTCONFIG} )
   set_target_properties( ${OpenBLAS_LIBNAME} PROPERTIES ARCHIVE_OUTPUT_DIRECTORY_${OUTPUTCONFIG} ${PROJECT_BINARY_DIR}/lib/${OUTPUTCONFIG} )
@@ -194,7 +198,7 @@ if (NOT MSVC AND NOT NOFORTRAN)
   endif()
 endif()
 
-set_target_properties(${OpenBLAS_LIBNAME} PROPERTIES 
+set_target_properties(${OpenBLAS_LIBNAME} PROPERTIES
   VERSION ${OpenBLAS_MAJOR_VERSION}.${OpenBLAS_MINOR_VERSION}
   SOVERSION ${OpenBLAS_MAJOR_VERSION}
 )
@@ -206,7 +210,7 @@ install(TARGETS ${OpenBLAS_LIBNAME}
 	RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
 	ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
   LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR} )
-  
+
 message(STATUS "Generating openblas_config.h in ${CMAKE_INSTALL_INCLUDEDIR}")
 
 set(OPENBLAS_CONFIG_H ${CMAKE_BINARY_DIR}/openblas_config.h)
@@ -250,7 +254,7 @@ if(NOT NO_LAPACKE)
 	add_dependencies( ${OpenBLAS_LIBNAME} genlapacke)
 	FILE(GLOB_RECURSE INCLUDE_FILES "${CMAKE_CURRENT_SOURCE_DIR}/lapack-netlib/LAPACKE/*.h")
 	install (FILES ${INCLUDE_FILES} DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})
- 
+
 	ADD_CUSTOM_TARGET(genlapacke
 	COMMAND ${CMAKE_COMMAND} -E copy ${CMAKE_CURRENT_SOURCE_DIR}/lapack-netlib/LAPACKE/include/lapacke_mangling_with_flags.h.in "${CMAKE_BINARY_DIR}/lapacke_mangling.h"
 	)

From 3cfc64404a42897fdd60d6fc753deb05aa9f60b2 Mon Sep 17 00:00:00 2001
From: xoviat <xoviat@users.noreply.github.com>
Date: Mon, 6 Nov 2017 15:05:20 -0600
Subject: [PATCH 5/6] [appveyor] fixes

---
 appveyor.yml | 17 +++++++++++++----
 1 file changed, 13 insertions(+), 4 deletions(-)

diff --git a/appveyor.yml b/appveyor.yml
index 1c0474d2d..4eaae5eed 100644
--- a/appveyor.yml
+++ b/appveyor.yml
@@ -24,23 +24,32 @@ skip_commits:
   message: /\[av skip\]/
 
 environment:
+  global:
+    CONDA_INSTALL_LOCN: C:\\Miniconda36-x64
   matrix:
     - COMPILER: clang-cl
-      DYNAMIC_ARCH: ON
+      WITH_FORTRAN: yes
     - COMPILER: clang-cl
+      DYNAMIC_ARCH: ON
+      WITH_FORTRAN: no
     - COMPILER: cl
 
 install:
-  - if [%COMPILER%]==[clang-cl] call C:\Miniconda36-x64\Scripts\activate.bat
+  - if [%COMPILER%]==[clang-cl] call %CONDA_INSTALL_LOCN%\Scripts\activate.bat
   - if [%COMPILER%]==[clang-cl] conda config --add channels conda-forge --force
-  - if [%COMPILER%]==[clang-cl] conda install --yes clangdev ninja cmake
+  - if [%WITH_FORTRAN%]==[yes] conda config --add channels isuruf/label/flang --force
+  - if [%COMPILER%]==[clang-cl] conda install --yes --quiet clangdev ninja cmake
+  - if [%WITH_FORTRAN%]==[yes] conda install --yes --quiet flangdev clangdev cmake
   - if [%COMPILER%]==[clang-cl] call "C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\vcvarsall.bat" amd64
+  - if [%COMPILER%]==[clang-cl] set "LIB=%CONDA_INSTALL_LOCN%\Library\lib;%LIB%"
+  - if [%COMPILER%]==[clang-cl] set "CPATH=%CONDA_INSTALL_LOCN%\Library\include;%CPATH%"
 
 before_build:
   - echo Running cmake...
   - cd c:\projects\OpenBLAS
   - if [%COMPILER%]==[cl] cmake -G "Visual Studio 12 Win64" .
-  - if [%COMPILER%]==[clang-cl] cmake -G "Ninja" -DCMAKE_CXX_COMPILER=clang-cl -DCMAKE_C_COMPILER=clang-cl .
+  - if [%WITH_FORTRAN%]==[no] cmake -G "Ninja" -DCMAKE_CXX_COMPILER=clang-cl -DCMAKE_C_COMPILER=clang-cl .
+  - if [%WITH_FORTRAN%]==[yes] cmake -G "NMake Makefiles" -DCMAKE_CXX_COMPILER=clang-cl -DCMAKE_C_COMPILER=clang-cl -DCMAKE_Fortran_COMPILER=flang -DBUILD_WITHOUT_LAPACK=no -DNOFORTRAN=0 .
   - if [%DYNAMIC_ARCH%]==[ON] cmake -DDYNAMIC_ARCH=ON .
 
 build_script:

From 92683142907ca9f5807cdd93688d928ffeaf87f3 Mon Sep 17 00:00:00 2001
From: Isuru Fernando <isuruf@gmail.com>
Date: Mon, 6 Nov 2017 19:00:23 -0600
Subject: [PATCH 6/6] Fix gensymbol script

---
 exports/gensymbol | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/exports/gensymbol b/exports/gensymbol
index 89c6e8320..f1983d458 100644
--- a/exports/gensymbol
+++ b/exports/gensymbol
@@ -3411,13 +3411,17 @@
 );
 
 
+use File::Spec;
+use File::Basename;
+my $dirname = File::Spec->catfile(dirname(dirname(File::Spec->rel2abs(__FILE__))), "lapack-netlib");
+
 if ($ARGV[8] == 1) {
     #ONLY_CBLAS=1
     @underscore_objs = (@misc_underscore_objs);
 } elsif ($ARGV[5] == 1) {
     #NO_LAPACK=1
     @underscore_objs = (@blasobjs, @misc_underscore_objs);
-} elsif (-d "../lapack-netlib") {
+} elsif (-d $dirname) {
     if ($ARGV[7] == 0) {
         # NEED2UNDERSCORES=0
         # Don't need 2 underscores
